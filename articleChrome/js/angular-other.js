"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a){function b(a,c){return new b.prototype.init(a,c)}var c=0,d=function(a){return this[0]=a.startOffset,this[1]=a.endOffset,this.range=a,this};d.prototype.equals=function(){return this[0]===this[1]},a.fn.redactor=function(c){var d=[],e=Array.prototype.slice.call(arguments,1);return this.each("string"==typeof c?function(){var b=a.data(this,"redactor");if("undefined"==typeof b||!a.isFunction(b[c]))return a.error('No such method "'+c+'" for Redactor');var f=b[c].apply(b,e);void 0!==f&&f!==b&&d.push(f)}:function(){a.data(this,"redactor")||a.data(this,"redactor",b(this,c))}),0===d.length?this:1===d.length?d[0]:d},a.Redactor=b,a.Redactor.VERSION="9.1.8",a.Redactor.opts={rangy:!1,iframe:!1,fullpage:!1,css:!1,lang:"en",direction:"ltr",placeholder:!1,wym:!1,mobile:!0,cleanup:!0,tidyHtml:!0,pastePlainText:!1,removeEmptyTags:!0,templateVars:!1,xhtml:!1,visual:!0,focus:!1,tabindex:!1,autoresize:!0,minHeight:!1,maxHeight:!1,shortcuts:!0,autosave:!1,autosaveInterval:60,plugins:!1,linkAnchor:!0,linkEmail:!0,linkProtocol:"http://",linkNofollow:!1,linkSize:50,imageFloatMargin:"10px",imageGetJson:!1,imageUpload:!1,imageUploadParam:"file",fileUpload:!1,fileUploadParam:"file",clipboardUpload:!0,clipboardUploadUrl:!1,dragUpload:!0,dnbImageTypes:["image/png","image/jpeg","image/gif"],s3:!1,uploadFields:!1,observeImages:!0,observeLinks:!0,modalOverlay:!0,tabSpaces:!1,tabFocus:!0,air:!1,airButtons:["formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent"],toolbar:!0,toolbarFixed:!1,toolbarFixedTarget:document,toolbarFixedTopOffset:0,toolbarFixedBox:!1,toolbarExternal:!1,buttonSource:!0,buttonSeparator:'<li class="redactor_separator"></li>',buttonsCustom:{},buttonsAdd:[],buttons:["html","|","formatting","|","bold","italic","deleted","|","unorderedlist","orderedlist","outdent","indent","|","image","video","file","table","link","|","alignment","|","horizontalrule"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","justify","table"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline",tr:"table",td:"table",table:"table"},activeButtonsAdd:!1,formattingTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],linebreaks:!1,paragraphy:!0,convertDivs:!0,convertLinks:!0,convertImageLinks:!1,convertVideoLinks:!1,formattingPre:!1,phpTags:!1,allowedTags:!1,deniedTags:["html","head","link","body","meta","script","style","applet"],boldTag:"strong",italicTag:"em",indentValue:20,buffer:[],rebuffer:[],textareamode:!1,emptyHtml:"<p>&#x200b;</p>",invisibleSpace:"&#x200b;",rBlockTest:/^(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)$/i,alignmentTags:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","TD","BLOCKQUOTE","OUTPUT","FIGCAPTION","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE"],ownLine:["area","body","head","hr","i?frame","link","meta","noscript","style","script","table","tbody","thead","tfoot"],contOwnLine:["li","dt","dt","h[1-6]","option","script"],newLevel:["blockquote","div","dl","fieldset","form","frameset","map","ol","p","pre","select","td","th","tr","ul"],blockLevelElements:["P","H1","H2","H3","H4","H5","H6","DD","DL","DT","DIV","LI","BLOCKQUOTE","OUTPUT","FIGCAPTION","PRE","ADDRESS","SECTION","HEADER","FOOTER","ASIDE","ARTICLE","TD"],langs:{en:{html:"HTML",video:"Insert Video",image:"Insert Image",table:"Table",link:"Link",link_insert:"Insert link",link_edit:"Edit link",unlink:"Unlink",formatting:"Formatting",paragraph:"Normal text",quote:"Quote",code:"Code",header1:"Header 1",header2:"Header 2",header3:"Header 3",header4:"Header 4",header5:"Header 5",bold:"Bold",italic:"Italic",fontcolor:"Font Color",backcolor:"Back Color",unorderedlist:"Unordered List",orderedlist:"Ordered List",outdent:"Outdent",indent:"Indent",cancel:"Cancel",insert:"Insert",save:"Save",_delete:"Delete",insert_table:"Insert Table",insert_row_above:"Add Row Above",insert_row_below:"Add Row Below",insert_column_left:"Add Column Left",insert_column_right:"Add Column Right",delete_column:"Delete Column",delete_row:"Delete Row",delete_table:"Delete Table",rows:"Rows",columns:"Columns",add_head:"Add Head",delete_head:"Delete Head",title:"Title",image_position:"Position",none:"None",left:"Left",right:"Right",image_web_link:"Image Web Link",text:"Text",mailto:"Email",web:"URL",video_html_code:"Video Embed Code",file:"Insert File",upload:"Upload",download:"Download",choose:"Choose",or_choose:"Or choose",drop_file_here:"Drop file here",align_left:"Align text to the left",align_center:"Center text",align_right:"Align text to the right",align_justify:"Justify text",horizontalrule:"Insert Horizontal Rule",deleted:"Deleted",anchor:"Anchor",link_new_tab:"Open link in new tab",underline:"Underline",alignment:"Alignment",filename:"Name (optional)",edit:"Edit"}}},b.fn=a.Redactor.prototype={keyCode:{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,TAB:9,CTRL:17,META:91,LEFT:37,LEFT_WIN:91},init:function(b,d){this.rtePaste=!1,this.$element=this.$source=a(b),this.uuid=c++;var e=a.extend(!0,{},a.Redactor.opts);if(this.opts=a.extend({},e,this.$element.data(),d),this.start=!0,this.dropdowns=[],this.sourceHeight=this.$source.css("height"),this.sourceWidth=this.$source.css("width"),this.opts.fullpage&&(this.opts.iframe=!0),this.opts.linebreaks&&(this.opts.paragraphy=!1),this.opts.paragraphy&&(this.opts.linebreaks=!1),this.opts.toolbarFixedBox&&(this.opts.toolbarFixed=!0),this.document=document,this.window=window,this.savedSel=!1,this.cleanlineBefore=new RegExp("^<(/?"+this.opts.ownLine.join("|/?")+"|"+this.opts.contOwnLine.join("|")+")[ >]"),this.cleanlineAfter=new RegExp("^<(br|/?"+this.opts.ownLine.join("|/?")+"|/"+this.opts.contOwnLine.join("|/")+")[ >]"),this.cleannewLevel=new RegExp("^</?("+this.opts.newLevel.join("|")+")[ >]"),this.rTestBlock=new RegExp("^("+this.opts.blockLevelElements.join("|")+")$","i"),this.opts.linebreaks===!1){if(this.opts.allowedTags!==!1){var f=["strong","em","del"],g=["b","i","strike"];"-1"===a.inArray("p",this.opts.allowedTags)&&this.opts.allowedTags.push("p");for(i in f)"-1"!=a.inArray(f[i],this.opts.allowedTags)&&this.opts.allowedTags.push(g[i])}if(this.opts.deniedTags!==!1){var h=a.inArray("p",this.opts.deniedTags);"-1"!==h&&this.opts.deniedTags.splice(h,h)}}(this.browser("msie")||this.browser("opera"))&&(this.opts.buttons=this.removeFromArrayByValue(this.opts.buttons,"horizontalrule")),this.opts.curLang=this.opts.langs[this.opts.lang],this.buildStart()},toolbarInit:function(a){return{html:{title:a.html,func:"toggle"},formatting:{title:a.formatting,func:"show",dropdown:{p:{title:a.paragraph,func:"formatBlocks"},blockquote:{title:a.quote,func:"formatQuote",className:"redactor_format_blockquote"},pre:{title:a.code,func:"formatBlocks",className:"redactor_format_pre"},h1:{title:a.header1,func:"formatBlocks",className:"redactor_format_h1"},h2:{title:a.header2,func:"formatBlocks",className:"redactor_format_h2"},h3:{title:a.header3,func:"formatBlocks",className:"redactor_format_h3"},h4:{title:a.header4,func:"formatBlocks",className:"redactor_format_h4"},h5:{title:a.header5,func:"formatBlocks",className:"redactor_format_h5"}}},bold:{title:a.bold,exec:"bold"},italic:{title:a.italic,exec:"italic"},deleted:{title:a.deleted,exec:"strikethrough"},underline:{title:a.underline,exec:"underline"},unorderedlist:{title:"&bull; "+a.unorderedlist,exec:"insertunorderedlist"},orderedlist:{title:"1. "+a.orderedlist,exec:"insertorderedlist"},outdent:{title:"< "+a.outdent,func:"indentingOutdent"},indent:{title:"> "+a.indent,func:"indentingIndent"},image:{title:a.image,func:"imageShow"},video:{title:a.video,func:"videoShow"},file:{title:a.file,func:"fileShow"},table:{title:a.table,func:"show",dropdown:{insert_table:{title:a.insert_table,func:"tableShow"},separator_drop1:{name:"separator"},insert_row_above:{title:a.insert_row_above,func:"tableAddRowAbove"},insert_row_below:{title:a.insert_row_below,func:"tableAddRowBelow"},insert_column_left:{title:a.insert_column_left,func:"tableAddColumnLeft"},insert_column_right:{title:a.insert_column_right,func:"tableAddColumnRight"},separator_drop2:{name:"separator"},add_head:{title:a.add_head,func:"tableAddHead"},delete_head:{title:a.delete_head,func:"tableDeleteHead"},separator_drop3:{name:"separator"},delete_column:{title:a.delete_column,func:"tableDeleteColumn"},delete_row:{title:a.delete_row,func:"tableDeleteRow"},delete_table:{title:a.delete_table,func:"tableDeleteTable"}}},link:{title:a.link,func:"show",dropdown:{link:{title:a.link_insert,func:"linkShow"},unlink:{title:a.unlink,exec:"unlink"}}},fontcolor:{title:a.fontcolor,func:"show"},backcolor:{title:a.backcolor,func:"show"},alignment:{title:a.alignment,func:"show",dropdown:{alignleft:{title:a.align_left,func:"alignmentLeft"},aligncenter:{title:a.align_center,func:"alignmentCenter"},alignright:{title:a.align_right,func:"alignmentRight"},justify:{title:a.align_justify,func:"alignmentJustify"}}},alignleft:{title:a.align_left,func:"alignmentLeft"},aligncenter:{title:a.align_center,func:"alignmentCenter"},alignright:{title:a.align_right,func:"alignmentRight"},justify:{title:a.align_justify,func:"alignmentJustify"},horizontalrule:{exec:"inserthorizontalrule",title:a.horizontalrule}}},callback:function(b,c,d){var e=this.opts[b+"Callback"];return a.isFunction(e)?c===!1?e.call(this,d):e.call(this,c,d):d},destroy:function(){clearInterval(this.autosaveInterval),a(window).off(".redactor"),this.$source.off("redactor-textarea"),this.$element.off(".redactor").removeData("redactor");var b=this.get();if(this.opts.textareamode)this.$box.after(this.$source),this.$box.remove(),this.$source.val(b).show();else{var c=this.$editor;this.opts.iframe&&(c=this.$element),this.$box.after(c),this.$box.remove(),c.removeClass("redactor_editor").removeClass("redactor_editor_wym").removeAttr("contenteditable").html(b).show()}this.opts.air&&a("#redactor_air_"+this.uuid).remove()},getObject:function(){return a.extend({},this)},getEditor:function(){return this.$editor},getBox:function(){return this.$box},getIframe:function(){return this.opts.iframe?this.$frame:!1},getToolbar:function(){return this.$toolbar?this.$toolbar:!1},get:function(){return this.$source.val()},getCodeIframe:function(){this.$editor.removeAttr("contenteditable").removeAttr("dir");var a=this.outerHtml(this.$frame.contents().children());return this.$editor.attr({contenteditable:!0,dir:this.opts.direction}),a},set:function(a,b,c){a=a.toString(),this.opts.fullpage?this.setCodeIframe(a):this.setEditor(a,b),""==a&&(c=!1),c!==!1&&this.placeholderRemove()},setEditor:function(a,b){b!==!1&&(a=this.cleanSavePreCode(a),a=this.cleanStripTags(a),a=this.cleanConvertProtected(a),a=this.cleanConvertInlineTags(a,!0),a=this.opts.linebreaks===!1?this.cleanConverters(a):a.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),a=this.cleanEmpty(a),this.$editor.html(a),this.setNonEditable(),this.setSpansVerified(),this.sync()},setCodeIframe:function(a){var b=this.iframePage();this.$frame[0].src="about:blank",a=this.cleanConvertProtected(a),a=this.cleanConvertInlineTags(a),a=this.cleanRemoveSpaces(a),b.open(),b.write(a),b.close(),this.opts.fullpage&&(this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction})),this.setNonEditable(),this.setSpansVerified(),this.sync()},setFullpageOnInit:function(a){a=this.cleanSavePreCode(a,!0),a=this.cleanConverters(a),a=this.cleanEmpty(a),this.$editor.html(a),this.setNonEditable(),this.setSpansVerified(),this.sync()},setSpansVerified:function(){var b=this.$editor.find("span"),c="inline";a.each(b,function(){var b=this.outerHTML,d=new RegExp("<"+this.tagName,"gi"),e=b.replace(d,"<"+c);d=new RegExp("</"+this.tagName,"gi"),e=e.replace(d,"</"+c),a(this).replaceWith(e)})},setSpansVerifiedHtml:function(a){return a=a.replace(/<span(.*?)>/,"<inline$1>"),a.replace(/<\/span>/,"</inline>")},setNonEditable:function(){this.$editor.find(".noneditable").attr("contenteditable",!1)},sync:function(){var b="";if(this.cleanUnverified(),b=this.opts.fullpage?this.getCodeIframe():this.$editor.html(),b=this.syncClean(b),b=this.cleanRemoveEmptyTags(b),b=b.replace(/<\/li><(ul|ol)>([\w\W]*?)<\/(ul|ol)>/gi,"<$1>$2</$1></li>"),"<br>"===a.trim(b)&&(b=""),this.opts.xhtml){var c=["br","hr","img","link","input","meta"];a.each(c,function(a,c){b=b.replace(new RegExp("<"+c+"(.*?[^/$]?)>","gi"),"<"+c+"$1 />")})}b=this.callback("syncBefore",!1,b),this.$source.val(b),this.callback("syncAfter",!1,b),this.start===!1&&this.callback("change",!1,b)},syncClean:function(b){return this.opts.fullpage||(b=this.cleanStripTags(b)),b=a.trim(b),b=this.placeholderRemoveFromCode(b),b=b.replace(/&#x200b;/gi,""),b=b.replace(/&#8203;/gi,""),b=b.replace(/<\/a>&nbsp;/gi,"</a> "),this.opts.linkNofollow&&(b=b.replace(/<a(.*?)rel="nofollow"(.*?)>/gi,"<a$1$2>"),b=b.replace(/<a(.*?)>/gi,'<a$1 rel="nofollow">')),b=b.replace("<!--?php","<?php"),b=b.replace("?-->","?>"),b=b.replace(/<(.*?)class="noeditable"(.*?) contenteditable="false"(.*?)>/gi,'<$1class="noeditable"$2$3>'),b=b.replace(/ data-tagblock=""/gi,""),b=b.replace(/<br\s?\/?>\n?<\/(P|H[1-6]|LI|ADDRESS|SECTION|HEADER|FOOTER|ASIDE|ARTICLE)>/gi,"</$1>"),b=b.replace(/<span(.*?)id="redactor-image-box"(.*?)>([\w\W]*?)<img(.*?)><\/span>/i,"$3<img$4>"),b=b.replace(/<span(.*?)id="redactor-image-resizer"(.*?)>(.*?)<\/span>/i,""),b=b.replace(/<span(.*?)id="redactor-image-editter"(.*?)>(.*?)<\/span>/i,""),b=b.replace(/<font(.*?)>([\w\W]*?)<\/font>/gi,"$2"),b=b.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),b=b.replace(/<inline>/gi,"<span>"),b=b.replace(/<inline /gi,"<span "),b=b.replace(/<\/inline>/gi,"</span>"),b=b.replace(/<span(.*?)class="redactor_placeholder"(.*?)>([\w\W]*?)<\/span>/gi,""),b=b.replace(/&amp;/gi,"&"),b=b.replace(/™/gi,"&trade;"),b=b.replace(/©/gi,"&copy;"),b=this.cleanReConvertProtected(b)},buildStart:function(){this.content="",this.$box=a('<div class="redactor_box" />'),"TEXTAREA"===this.$source[0].tagName&&(this.opts.textareamode=!0),this.opts.mobile===!1&&this.isMobile()?this.buildMobile():(this.buildContent(),this.opts.iframe?(this.opts.autoresize=!1,this.iframeStart()):this.opts.textareamode?this.buildFromTextarea():this.buildFromElement(),this.opts.iframe||(this.buildOptions(),this.buildAfter()))},buildMobile:function(){this.opts.textareamode||(this.$editor=this.$source,this.$editor.hide(),this.$source=this.buildCodearea(this.$editor),this.$source.val(this.content)),this.$box.insertAfter(this.$source).append(this.$source)},buildContent:function(){this.content=a.trim(this.opts.textareamode?this.$source.val():this.$source.html())},buildFromTextarea:function(){this.$editor=a("<div />"),this.$box.insertAfter(this.$source).append(this.$editor).append(this.$source),this.buildAddClasses(this.$editor),this.buildEnable()},buildFromElement:function(){this.$editor=this.$source,this.$source=this.buildCodearea(this.$editor),this.$box.insertAfter(this.$editor).append(this.$editor).append(this.$source),this.buildEnable()},buildCodearea:function(b){return a("<textarea />").attr("name",b.attr("id")).css("height",this.sourceHeight)},buildAddClasses:function(b){a.each(this.$source.get(0).className.split(/\s+/),function(a,c){b.addClass("redactor_"+c)})},buildEnable:function(){this.$editor.addClass("redactor_editor").attr({contenteditable:!0,dir:this.opts.direction}),this.$source.attr("dir",this.opts.direction).hide(),this.set(this.content,!0,!1)},buildOptions:function(){var a=this.$editor;this.opts.iframe&&(a=this.$frame),this.opts.tabindex&&a.attr("tabindex",this.opts.tabindex),this.opts.minHeight&&a.css("min-height",this.opts.minHeight+"px"),this.opts.maxHeight&&(this.opts.autoresize=!1,a.css("max-height",this.opts.maxHeight+"px")),this.opts.wym&&this.$editor.addClass("redactor_editor_wym"),this.opts.autoresize||a.css("height",this.sourceHeight)},buildAfter:function(){if(this.start=!1,this.opts.toolbar&&(this.opts.toolbar=this.toolbarInit(this.opts.curLang),this.toolbarBuild()),this.modalTemplatesInit(),this.buildPlugins(),this.buildBindKeyboard(),this.opts.autosave&&this.autosave(),setTimeout(a.proxy(this.observeStart,this),4),this.browser("mozilla"))try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(b){}this.opts.focus&&setTimeout(a.proxy(this.focus,this),100),this.opts.visual||setTimeout(a.proxy(function(){this.opts.visual=!0,this.toggle(!1)},this),200),this.callback("init")},buildBindKeyboard:function(){this.dblEnter=0,this.opts.dragUpload&&this.opts.imageUpload!==!1&&this.$editor.on("drop.redactor",a.proxy(this.buildEventDrop,this)),this.$editor.on("paste.redactor",a.proxy(this.buildEventPaste,this)),this.$editor.on("keydown.redactor",a.proxy(this.buildEventKeydown,this)),this.$editor.on("keyup.redactor",a.proxy(this.buildEventKeyup,this)),a.isFunction(this.opts.textareaKeydownCallback)&&this.$source.on("keydown.redactor-textarea",a.proxy(this.opts.textareaKeydownCallback,this)),a.isFunction(this.opts.focusCallback)&&this.$editor.on("focus.redactor",a.proxy(this.opts.focusCallback,this));var b;a(document).mousedown(function(c){b=a(c.target)}),this.$editor.on("blur.redactor",a.proxy(function(c){a(b).hasClass("redactor_toolbar")||0!=a(b).parents(".redactor_toolbar").size()||(this.selectall=!1,a.isFunction(this.opts.blurCallback)&&this.callback("blur",c))},this))},buildEventDrop:function(b){if(b=b.originalEvent||b,void 0===window.FormData||!b.dataTransfer)return!0;var c=b.dataTransfer.files.length;if(0==c)return!0;b.preventDefault();var d=b.dataTransfer.files[0];if(this.opts.dnbImageTypes!==!1&&-1==this.opts.dnbImageTypes.indexOf(d.type))return!0;this.bufferSet();var e=a('<div id="redactor-progress-drag" class="redactor-progress redactor-progress-striped"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div>');a(document.body).append(e),this.opts.s3===!1?this.dragUploadAjax(this.opts.imageUpload,d,!0,e,b,this.opts.imageUploadParam):this.s3uploadFile(d)},buildEventPaste:function(b){var c=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var d=this.browser("version").split(".");d[0]<536&&(c=!0)}if(c)return!0;if(this.browser("opera"))return!0;if(this.opts.clipboardUpload&&this.buildEventClipboardUpload(b))return!0;if(this.opts.cleanup){this.rtePaste=!0,this.selectionSave(),this.selectall||(this.opts.autoresize===!0&&this.fullscreen!==!0?(this.$editor.height(this.$editor.height()),this.saveScroll=this.document.body.scrollTop):this.saveScroll=this.$editor.scrollTop());var e=this.extractContent();setTimeout(a.proxy(function(){var a=this.extractContent();this.$editor.append(e),this.selectionRestore();var b=this.getFragmentHtml(a);this.pasteClean(b),this.opts.autoresize===!0&&this.fullscreen!==!0&&this.$editor.css("height","auto")},this),1)}},buildEventClipboardUpload:function(b){var c=b.originalEvent||b;if(this.clipboardFilePaste=!1,"undefined"==typeof c.clipboardData)return!1;if(c.clipboardData.items){var d=c.clipboardData.items[0].getAsFile();if(null!==d){this.bufferSet(),this.clipboardFilePaste=!0;var e=new FileReader;return e.onload=a.proxy(this.pasteClipboardUpload,this),e.readAsDataURL(d),!0}}return!1},buildEventKeydown:function(b){if(this.rtePaste)return!1;var c=b.which,d=b.ctrlKey||b.metaKey,e=this.getParent(),f=this.getCurrent(),g=this.getBlock(),h=!1;if(this.callback("keydown",b),this.imageResizeHide(!1),(e&&"PRE"===a(e).get(0).tagName||f&&"PRE"===a(f).get(0).tagName)&&(h=!0,c===this.keyCode.DOWN&&this.insertAfterLastElement(g)),c===this.keyCode.DOWN&&(e&&"BLOCKQUOTE"===a(e)[0].tagName&&this.insertAfterLastElement(e),f&&"BLOCKQUOTE"===a(f)[0].tagName&&this.insertAfterLastElement(f),e&&"P"===a(e)[0].tagName&&"BLOCKQUOTE"==a(e).parent()[0].tagName&&this.insertAfterLastElement(e,a(e).parent()[0]),f&&"P"===a(f)[0].tagName&&e&&"BLOCKQUOTE"==a(e)[0].tagName&&this.insertAfterLastElement(f,e)),d&&!b.shiftKey&&this.shortcuts(b,c),d&&90===c&&!b.shiftKey&&!b.altKey)return b.preventDefault(),void(this.opts.buffer.length?this.bufferUndo():this.document.execCommand("undo",!1,!1));if(d&&90===c&&b.shiftKey&&!b.altKey)return b.preventDefault(),void(0!=this.opts.rebuffer.length?this.bufferRedo():this.document.execCommand("redo",!1,!1));if(d&&65===c?this.selectall=!0:c==this.keyCode.LEFT_WIN||d||(this.selectall=!1),c!=this.keyCode.ENTER||b.shiftKey||b.ctrlKey||b.metaKey)c===this.keyCode.ENTER&&(b.ctrlKey||b.shiftKey)&&(this.bufferSet(),b.preventDefault(),this.insertLineBreak());else{if(this.browser("msie")&&1==e.nodeType&&("TD"==e.tagName||"TH"==e.tagName))return b.preventDefault(),this.bufferSet(),this.insertNode(document.createElement("br")),this.callback("enter",b),!1;if(g&&("BLOCKQUOTE"==g.tagName||"BLOCKQUOTE"==a(g).parent()[0].tagName))if(this.isEndOfElement()){if(1==this.dblEnter){var i,j;if("BLOCKQUOTE"==g.tagName?(j="br",i=g):(j="p",i=a(g).parent()[0]),b.preventDefault(),this.insertingAfterLastElement(i),this.dblEnter=0,"p"==j)a(g).parent().find("p").last().remove();else{var k=a.trim(a(g).html());a(g).html(k.replace(/<br\s?\/?>$/i,""))}return}this.dblEnter++}else this.dblEnter++;if(h===!0)return this.buildEventKeydownPre(b,f);if(!this.opts.linebreaks)if(g&&this.opts.rBlockTest.test(g.tagName))this.bufferSet(),setTimeout(a.proxy(function(){var b=this.getBlock();if("DIV"===b.tagName&&!a(b).hasClass("redactor_editor")){var c=a("<p>"+this.opts.invisibleSpace+"</p>");a(b).replaceWith(c),this.selectionStart(c)}},this),1);else if(g===!1){this.bufferSet();var l=a("<p>"+this.opts.invisibleSpace+"</p>");return this.insertNode(l[0]),this.selectionStart(l),this.callback("enter",b),!1}if(this.opts.linebreaks){if(!g||!this.opts.rBlockTest.test(g.tagName))return this.buildEventKeydownInsertLineBreak(b);this.bufferSet(),setTimeout(a.proxy(function(){var b=this.getBlock();"DIV"!==b.tagName&&"P"!==b.tagName||a(b).hasClass("redactor_editor")||this.replaceLineBreak(b)},this),1)}if("BLOCKQUOTE"==g.tagName||"FIGCAPTION"==g.tagName)return this.buildEventKeydownInsertLineBreak(b);this.callback("enter",b)}return c===this.keyCode.TAB&&this.opts.shortcuts?this.buildEventKeydownTab(b,h):void(c===this.keyCode.BACKSPACE&&this.buildEventKeydownBackspace(f))},buildEventKeydownPre:function(b,c){b.preventDefault(),this.bufferSet();var d=a(c).parent().text();return this.insertNode(document.createTextNode("\n")),-1==d.search(/\s$/)&&this.insertNode(document.createTextNode("\n")),this.sync(),this.callback("enter",b),!1},buildEventKeydownTab:function(a,b){return this.opts.tabFocus?this.isEmpty(this.get())&&this.opts.tabSpaces===!1?!0:(a.preventDefault(),b!==!0||a.shiftKey?this.opts.tabSpaces!==!1?(this.bufferSet(),this.insertNode(document.createTextNode(Array(this.opts.tabSpaces+1).join(" "))),this.sync(),!1):(a.shiftKey?this.indentingOutdent():this.indentingIndent(),!1):(this.bufferSet(),this.insertNode(document.createTextNode("	")),this.sync(),!1)):!0},buildEventKeydownBackspace:function(b){if("undefined"!=typeof b.tagName&&/^(H[1-6])$/i.test(b.tagName)){var c;c=a(this.opts.linebreaks===!1?"<p>"+this.opts.invisibleSpace+"</p>":"<br>"+this.opts.invisibleSpace),a(b).replaceWith(c),this.selectionStart(c)}"undefined"!=typeof b.nodeValue&&null!==b.nodeValue&&b.remove&&3===b.nodeType&&null==b.nodeValue.match(/[^/\u200B]/g)&&b.remove()},buildEventKeydownInsertLineBreak:function(a){this.bufferSet(),a.preventDefault(),this.insertLineBreak(),this.callback("enter",a)},buildEventKeyup:function(b){if(this.rtePaste)return!1;var c=b.which,d=this.getParent(),e=this.getCurrent();if(!this.opts.linebreaks&&3==e.nodeType&&(0==d||"BODY"==d.tagName)){var f=a("<p>").append(a(e).clone());a(e).replaceWith(f);var g=a(f).next();"undefined"!=typeof g[0]&&"BR"==g[0].tagName&&g.remove(),this.selectionEnd(f)}return(this.opts.convertLinks||this.opts.convertImageLinks||this.opts.convertVideoLinks)&&c===this.keyCode.ENTER&&this.buildEventKeyupConverters(),c===this.keyCode.DELETE||c===this.keyCode.BACKSPACE?this.formatEmpty(b):(this.callback("keyup",b),void this.sync())},buildEventKeyupConverters:function(){this.formatLinkify(this.opts.linkProtocol,this.opts.convertLinks,this.opts.convertImageLinks,this.opts.convertVideoLinks,this.opts.linkSize),setTimeout(a.proxy(function(){this.opts.convertImageLinks&&this.observeImages(),this.opts.observeLinks&&this.observeLinks()},this),5)},buildPlugins:function(){this.opts.plugins&&a.each(this.opts.plugins,a.proxy(function(b,c){RedactorPlugins[c]&&(a.extend(this,RedactorPlugins[c]),a.isFunction(RedactorPlugins[c].init)&&this.init())},this))},iframeStart:function(){this.iframeCreate(),this.opts.textareamode?this.iframeAppend(this.$source):(this.$sourceOld=this.$source.hide(),this.$source=this.buildCodearea(this.$sourceOld),this.iframeAppend(this.$sourceOld))},iframeAppend:function(a){this.$source.attr("dir",this.opts.direction).hide(),this.$box.insertAfter(a).append(this.$frame).append(this.$source)},iframeCreate:function(){this.$frame=a('<iframe style="width: 100%;" frameborder="0" />').one("load",a.proxy(function(){if(this.opts.fullpage){this.iframePage(),""===this.content&&(this.content=this.opts.invisibleSpace),this.$frame.contents()[0].write(this.content),this.$frame.contents()[0].close();var b=setInterval(a.proxy(function(){this.$frame.contents().find("body").html()&&(clearInterval(b),this.iframeLoad())},this),0)}else this.iframeLoad()},this))},iframeDoc:function(){return this.$frame[0].contentWindow.document},iframePage:function(){var a=this.iframeDoc();return a.documentElement&&a.removeChild(a.documentElement),a},iframeAddCss:function(b){b=b||this.opts.css,this.isString(b)&&this.$frame.contents().find("head").append('<link rel="stylesheet" href="'+b+'" />'),a.isArray(b)&&a.each(b,a.proxy(function(a,b){this.iframeAddCss(b)},this))},iframeLoad:function(){this.$editor=this.$frame.contents().find("body").attr({contenteditable:!0,dir:this.opts.direction}),this.$editor[0]&&(this.document=this.$editor[0].ownerDocument,this.window=this.document.defaultView||window),this.iframeAddCss(),this.opts.fullpage?this.setFullpageOnInit(this.$editor.html()):this.set(this.content,!0,!1),this.buildOptions(),this.buildAfter()},placeholderStart:function(b){return this.isEmpty(b)&&(this.$element.attr("placeholder")&&(this.opts.placeholder=this.$element.attr("placeholder")),""===this.opts.placeholder&&(this.opts.placeholder=!1),this.opts.placeholder!==!1)?(this.opts.focus=!1,this.$editor.one("focus.redactor_placeholder",a.proxy(this.placeholderFocus,this)),a('<span class="redactor_placeholder" data-redactor="verified">').attr("contenteditable",!1).text(this.opts.placeholder)):!1},placeholderFocus:function(){this.$editor.find("span.redactor_placeholder").remove();var a="";this.opts.linebreaks===!1&&(a=this.opts.emptyHtml),this.$editor.off("focus.redactor_placeholder"),this.$editor.html(a),this.opts.linebreaks===!1?this.selectionStart(this.$editor.children()[0]):this.focus(),this.sync()},placeholderRemove:function(){this.opts.placeholder=!1,this.$editor.find("span.redactor_placeholder").remove(),this.$editor.off("focus.redactor_placeholder")},placeholderRemoveFromCode:function(a){return a.replace(/<span class="redactor_placeholder"(.*?)>(.*?)<\/span>/i,"")},shortcuts:function(a,b){this.opts.shortcuts&&(a.altKey?48===b?this.shortcutsLoadFormat(a,"p"):49===b?this.shortcutsLoadFormat(a,"h1"):50===b?this.shortcutsLoadFormat(a,"h2"):51===b?this.shortcutsLoadFormat(a,"h3"):52===b?this.shortcutsLoadFormat(a,"h4"):53===b?this.shortcutsLoadFormat(a,"h5"):54===b&&this.shortcutsLoadFormat(a,"h6"):77===b?this.shortcutsLoad(a,"removeFormat"):66===b?this.shortcutsLoad(a,"bold"):73===b?this.shortcutsLoad(a,"italic"):74===b?this.shortcutsLoad(a,"insertunorderedlist"):75===b?this.shortcutsLoad(a,"insertorderedlist"):72===b?this.shortcutsLoad(a,"superscript"):76===b&&this.shortcutsLoad(a,"subscript"))},shortcutsLoad:function(a,b){a.preventDefault(),this.execCommand(b,!1)},shortcutsLoadFormat:function(a,b){a.preventDefault(),this.formatBlocks(b)},focus:function(){this.browser("opera")?this.$editor.focus():this.window.setTimeout(a.proxy(this.focusSet,this,!0),1)},focusEnd:function(){this.focusSet()},focusSet:function(a){this.$editor.focus();var b=this.getRange();b.selectNodeContents(this.$editor[0]),b.collapse(a||!1);var c=this.getSelection();c.removeAllRanges(),c.addRange(b)},toggle:function(a){this.opts.visual?this.toggleCode(a):this.toggleVisual()},toggleVisual:function(){var a=this.$source.hide().val();"undefined"!=typeof this.modified&&(this.modified=this.cleanRemoveSpaces(this.modified,!1)!==this.cleanRemoveSpaces(a,!1)),this.modified&&(this.opts.fullpage&&""===a?this.setFullpageOnInit(a):(this.set(a),this.opts.fullpage&&this.buildBindKeyboard())),this.opts.iframe?this.$frame.show():this.$editor.show(),this.opts.fullpage&&this.$editor.attr("contenteditable",!0),this.$source.off("keydown.redactor-textarea-indenting"),this.$editor.focus(),this.selectionRestore(),this.observeStart(),this.buttonActiveVisual(),this.buttonInactive("html"),this.opts.visual=!0},toggleCode:function(a){a!==!1&&this.selectionSave();
var b=null;this.opts.iframe?(b=this.$frame.height(),this.opts.fullpage&&this.$editor.removeAttr("contenteditable"),this.$frame.hide()):(b=this.$editor.innerHeight(),this.$editor.hide());var c=this.$source.val();""!==c&&this.opts.tidyHtml&&this.$source.val(this.cleanHtml(c)),this.modified=c,this.$source.height(b).show().focus(),this.$source.on("keydown.redactor-textarea-indenting",this.textareaIndenting),this.buttonInactiveVisual(),this.buttonActive("html"),this.opts.visual=!1},textareaIndenting:function(b){if(9===b.keyCode){var c=a(this),d=c.get(0).selectionStart;return c.val(c.val().substring(0,d)+"	"+c.val().substring(c.get(0).selectionEnd)),c.get(0).selectionStart=c.get(0).selectionEnd=d+1,!1}},autosave:function(){var b=!1;this.autosaveInterval=setInterval(a.proxy(function(){var c=this.get();b!==c&&a.ajax({url:this.opts.autosave,type:"post",data:this.$source.attr("name")+"="+escape(encodeURIComponent(c)),success:a.proxy(function(a){this.callback("autosave",!1,a),b=c},this)})},this),1e3*this.opts.autosaveInterval)},toolbarBuild:function(){if(this.opts.air)this.opts.buttons=this.opts.airButtons;else if(!this.opts.buttonSource){var b=this.opts.buttons.indexOf("html"),c=this.opts.buttons[b+1];this.opts.buttons.splice(b,1),"|"===c&&this.opts.buttons.splice(b,1)}if(a.extend(this.opts.toolbar,this.opts.buttonsCustom),a.each(this.opts.buttonsAdd,a.proxy(function(a,b){this.opts.buttons.push(b)},this)),this.opts.toolbar&&a.each(this.opts.toolbar.formatting.dropdown,a.proxy(function(b){"-1"==a.inArray(b,this.opts.formattingTags)&&delete this.opts.toolbar.formatting.dropdown[b]},this)),0===this.opts.buttons.length)return!1;if(this.airEnable(),this.$toolbar=a("<ul>").addClass("redactor_toolbar").attr("id","redactor_toolbar_"+this.uuid),this.opts.air?(this.$air=a('<div class="redactor_air">').attr("id","redactor_air_"+this.uuid).hide(),this.$air.append(this.$toolbar),a("body").append(this.$air)):this.opts.toolbarExternal?a(this.opts.toolbarExternal).html(this.$toolbar):this.$box.prepend(this.$toolbar),a.each(this.opts.buttons,a.proxy(function(b,c){if("|"===c)this.$toolbar.append(a(this.opts.buttonSeparator));else if(this.opts.toolbar[c]){var d=this.opts.toolbar[c];if(this.opts.fileUpload===!1&&"file"===c)return!0;this.$toolbar.append(a("<li>").append(this.buttonBuild(c,d)))}},this)),this.$toolbar.find("a").attr("tabindex","-1"),this.opts.toolbarFixed&&(this.toolbarObserveScroll(),a(this.opts.toolbarFixedTarget).on("scroll.redactor",a.proxy(this.toolbarObserveScroll,this))),this.opts.activeButtons){var d=a.proxy(this.buttonActiveObserver,this);this.$editor.on("mouseup.redactor keyup.redactor",d)}},toolbarObserveScroll:function(){var b=a(this.opts.toolbarFixedTarget).scrollTop(),c=this.$box.offset().top,d=0,e=c+this.$box.height()+40;if(b>c){var f="100%";this.opts.toolbarFixedBox&&(d=this.$box.offset().left,f=this.$box.innerWidth(),this.$toolbar.addClass("toolbar_fixed_box")),this.toolbarFixed=!0,this.$toolbar.css({position:"fixed",width:f,zIndex:1005,top:this.opts.toolbarFixedTopOffset+"px",left:d}),e>b?this.$toolbar.css("visibility","visible"):this.$toolbar.css("visibility","hidden")}else this.toolbarFixed=!1,this.$toolbar.css({position:"relative",width:"auto",top:0,left:d}),this.opts.toolbarFixedBox&&this.$toolbar.removeClass("toolbar_fixed_box")},airEnable:function(){this.opts.air&&this.$editor.on("mouseup.redactor keyup.redactor",this,a.proxy(function(b){var c=this.getSelectionText();if("mouseup"===b.type&&""!=c&&this.airShow(b),"keyup"===b.type&&b.shiftKey&&""!=c){var d=a(this.getElement(this.getSelection().focusNode)),e=d.offset();e.height=d.height(),this.airShow(e,!0)}},this))},airShow:function(b,c){if(this.opts.air){var d,e;if(a(".redactor_air").hide(),c)d=b.left,e=b.top+b.height+14,this.opts.iframe&&(e+=this.$box.position().top-a(this.document).scrollTop(),d+=this.$box.position().left);else{var f=this.$air.innerWidth();d=b.clientX,a(this.document).width()<d+f&&(d-=f),e=b.clientY+14,this.opts.iframe?(e+=this.$box.position().top,d+=this.$box.position().left):e+=a(this.document).scrollTop()}this.$air.css({left:d+"px",top:e+"px"}).show(),this.airBindHide()}},airBindHide:function(){if(this.opts.air){var b=a.proxy(function(b){a(b).on("mousedown.redactor",a.proxy(function(c){0===a(c.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),this.selectionRemove(),a(b).off(c))},this)).on("keydown.redactor",a.proxy(function(c){c.which===this.keyCode.ESC&&this.getSelection().collapseToStart(),this.$air.fadeOut(100),a(b).off(c)},this))},this);b(document),this.opts.iframe&&b(this.document)}},airBindMousemoveHide:function(){if(this.opts.air){var b=a.proxy(function(b){a(b).on("mousemove.redactor",a.proxy(function(c){0===a(c.target).closest(this.$toolbar).length&&(this.$air.fadeOut(100),a(b).off(c))},this))},this);b(document),this.opts.iframe&&b(this.document)}},dropdownBuild:function(b,c){a.each(c,a.proxy(function(c,d){d.className||(d.className="");var e;"separator"===d.name?e=a('<a class="redactor_separator_drop">'):(e=a('<a href="#" class="'+d.className+" redactor_dropdown_"+c+'">'+d.title+"</a>"),e.on("click",a.proxy(function(a){a.preventDefault&&a.preventDefault(),this.browser("msie")&&(a.returnValue=!1),d.callback&&d.callback.call(this,c,e,d,a),d.exec&&this.execCommand(d.exec,c),d.func&&this[d.func](c),this.buttonActiveObserver(),this.opts.air&&this.$air.fadeOut(100)},this))),b.append(e)},this))},dropdownShow:function(b,c){if(!this.opts.visual)return b.preventDefault(),!1;var d=this.$toolbar.find(".redactor_dropdown_box_"+c),e=this.buttonGet(c);if(e.hasClass("dropact"))this.dropdownHideAll();else{this.dropdownHideAll(),this.buttonActive(c),e.addClass("dropact");var f=e.position();this.toolbarFixed&&(f=e.offset());var g=d.width();f.left+g>a(document).width()&&(f.left-=g);var h=f.left+"px",i=29,j="absolute",k=i+"px";this.opts.toolbarFixed&&this.toolbarFixed?j="fixed":this.opts.air||(k=f.top+i+"px"),d.css({position:j,left:h,top:k}).show()}var l=a.proxy(function(a){this.dropdownHide(a,d)},this);a(document).one("click",l),this.$editor.one("click",l),b.stopPropagation()},dropdownHideAll:function(){this.$toolbar.find("a.dropact").removeClass("redactor_act").removeClass("dropact"),a(".redactor_dropdown").hide()},dropdownHide:function(b,c){a(b.target).hasClass("dropact")||(c.removeClass("dropact"),this.dropdownHideAll())},buttonBuild:function(b,c){var d=a('<a href="javascript:;" title="'+c.title+'" tabindex="-1" class="redactor_btn redactor_btn_'+b+'"></a>');if(d.on("click",a.proxy(function(a){return a.preventDefault&&a.preventDefault(),this.browser("msie")&&(a.returnValue=!1),d.hasClass("redactor_button_disabled")?!1:(this.isFocused()!==!1||c.exec||this.$editor.focus(),c.exec?(this.$editor.focus(),this.execCommand(c.exec,b),this.airBindMousemoveHide()):c.func&&"show"!==c.func?(this[c.func](b),this.airBindMousemoveHide()):c.callback?(c.callback.call(this,b,d,c,a),this.airBindMousemoveHide()):c.dropdown&&this.dropdownShow(a,b),void this.buttonActiveObserver(!1,b))},this)),c.dropdown){var e=a('<div class="redactor_dropdown redactor_dropdown_box_'+b+'" style="display: none;">');e.appendTo(this.$toolbar),this.dropdownBuild(e,c.dropdown)}return d},buttonGet:function(b){return this.opts.toolbar?a(this.$toolbar.find("a.redactor_btn_"+b)):!1},buttonActiveToggle:function(a){var b=this.buttonGet(a);b.hasClass("redactor_act")?b.removeClass("redactor_act"):b.addClass("redactor_act")},buttonActive:function(a){this.buttonGet(a).addClass("redactor_act")},buttonInactive:function(a){this.buttonGet(a).removeClass("redactor_act")},buttonInactiveAll:function(b){a.each(this.opts.toolbar,a.proxy(function(a){a!=b&&this.buttonInactive(a)},this))},buttonActiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").removeClass("redactor_button_disabled")},buttonInactiveVisual:function(){this.$toolbar.find("a.redactor_btn").not("a.redactor_btn_html").addClass("redactor_button_disabled")},buttonChangeIcon:function(a,b){this.buttonGet(a).addClass("redactor_btn_"+b)},buttonRemoveIcon:function(a,b){this.buttonGet(a).removeClass("redactor_btn_"+b)},buttonAddSeparator:function(){this.$toolbar.append(a(this.opts.buttonSeparator))},buttonAddSeparatorAfter:function(b){this.buttonGet(b).parent().after(a(this.opts.buttonSeparator))},buttonAddSeparatorBefore:function(b){this.buttonGet(b).parent().before(a(this.opts.buttonSeparator))},buttonRemoveSeparatorAfter:function(a){this.buttonGet(a).parent().next().remove()},buttonRemoveSeparatorBefore:function(a){this.buttonGet(a).parent().prev().remove()},buttonSetRight:function(a){this.opts.toolbar&&this.buttonGet(a).parent().addClass("redactor_btn_right")},buttonSetLeft:function(a){this.opts.toolbar&&this.buttonGet(a).parent().removeClass("redactor_btn_right")},buttonAdd:function(b,c,d,e){if(this.opts.toolbar){var f=this.buttonBuild(b,{title:c,callback:d,dropdown:e});this.$toolbar.append(a("<li>").append(f))}},buttonAddFirst:function(b,c,d,e){if(this.opts.toolbar){var f=this.buttonBuild(b,{title:c,callback:d,dropdown:e});this.$toolbar.prepend(a("<li>").append(f))}},buttonAddAfter:function(b,c,d,e,f){if(this.opts.toolbar){var g=this.buttonBuild(c,{title:d,callback:e,dropdown:f}),h=this.buttonGet(b);0!==h.size()?h.parent().after(a("<li>").append(g)):this.$toolbar.append(a("<li>").append(g))}},buttonAddBefore:function(b,c,d,e,f){if(this.opts.toolbar){var g=this.buttonBuild(c,{title:d,callback:e,dropdown:f}),h=this.buttonGet(b);0!==h.size()?h.parent().before(a("<li>").append(g)):this.$toolbar.append(a("<li>").append(g))}},buttonRemove:function(a,b){var c=this.buttonGet(a);b&&c.parent().next().remove(),c.parent().removeClass("redactor_btn_right"),c.remove()},buttonActiveObserver:function(b,c){var d=this.getParent();if(this.buttonInactiveAll(c),b===!1&&"html"!==c)return void(-1!=a.inArray(c,this.opts.activeButtons)&&this.buttonActiveToggle(c));this.$toolbar.find("a.redactor_dropdown_link").text(d&&"A"===d.tagName?this.opts.curLang.link_edit:this.opts.curLang.link_insert),this.opts.activeButtonsAdd&&(a.each(this.opts.activeButtonsAdd,a.proxy(function(a,b){this.opts.activeButtons.push(b)},this)),a.extend(this.opts.activeButtonsStates,this.opts.activeButtonsAdd)),a.each(this.opts.activeButtonsStates,a.proxy(function(b,c){0!=a(d).closest(b,this.$editor.get()[0]).length&&this.buttonActive(c)},this));var e=a(d).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);if(e.length){var f=e.css("text-align");switch(f){case"right":this.buttonActive("alignright");break;case"center":this.buttonActive("aligncenter");break;case"justify":this.buttonActive("justify");break;default:this.buttonActive("alignleft")}}},exec:function(a,b,c){"formatblock"===a&&this.browser("msie")&&(b="<"+b+">"),"inserthtml"===a&&this.browser("msie")?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(b)):this.document.execCommand(a,!1,b),c!==!1&&this.sync(),this.callback("execCommand",a,b)},execCommand:function(a,b,c){return this.opts.visual?"inserthtml"===a?(this.insertHtml(b,c),void this.callback("execCommand",a,b)):this.currentOrParentIs("PRE")&&!this.opts.formattingPre?!1:"insertunorderedlist"===a||"insertorderedlist"===a?this.execLists(a,b):"unlink"===a?this.execUnlink(a,b):(this.exec(a,b,c),void("inserthorizontalrule"===a&&this.$editor.find("hr").removeAttr("id"))):(this.$source.focus(),!1)},execUnlink:function(b,c){this.bufferSet();var d=this.currentOrParentIs("A");return d?(a(d).replaceWith(a(d).text()),this.sync(),void this.callback("execCommand",b,c)):void 0},execLists:function(b,c){this.bufferSet();var d=this.getParent(),e=a(d).closest("ol, ul"),f=!1;if(e.length){f=!0;var g=e[0].tagName;("insertunorderedlist"===b&&"OL"===g||"insertorderedlist"===b&&"UL"===g)&&(f=!1)}if(this.selectionSave(),f){var h=this.getNodes(),i=this.getBlocks(h);"undefined"!=typeof h[0]&&h.length>1&&3==h[0].nodeType&&i.unshift(this.getBlock());var j="",k="";a.each(i,a.proxy(function(b,c){if("LI"==c.tagName){var d=a(c),e=d.clone();e.find("ul","ol").remove(),j+=this.opts.linebreaks===!1?this.outerHtml(a("<p>").append(e.contents())):e.html()+"<br>",0==b?(d.addClass("redactor-replaced").empty(),k=this.outerHtml(d)):d.remove()}},this)),html=this.$editor.html().replace(k,"</"+g+">"+j+"<"+g+">"),this.$editor.html(html),this.$editor.find(g+":empty").remove()}else{var l=this.getParent();this.document.execCommand(b);var d=this.getParent(),e=a(d).closest("ol, ul");if(l&&"TD"==l.tagName&&e.wrapAll("<td>"),e.length){(this.browser("msie")||this.browser("mozilla"))&&"LI"!==d.tagName&&a(d).replaceWith(a(d).html());var m=e.parent();this.isParentRedactor(m)&&this.nodeTestBlocks(m[0])&&m.replaceWith(m.contents())}this.browser("mozilla")&&this.$editor.focus()}this.selectionRestore(),this.sync(),this.callback("execCommand",b,c)},indentingIndent:function(){this.indentingStart("indent")},indentingOutdent:function(){this.indentingStart("outdent")},indentingStart:function(b){if(this.bufferSet(),"indent"===b){var c=this.getBlock();if(this.selectionSave(),c&&"LI"==c.tagName){var d=this.getParent(),e=a(d).closest("ol, ul"),f=e[0].tagName,g=this.getBlocks();a.each(g,function(b,c){if("LI"==c.tagName){var d=a(c).prev();if(0!=d.size()&&"LI"==d[0].tagName){var e=d.children("ul, ol");0==e.size()?d.append(a("<"+f+">").append(c)):e.append(c)}}})}else if(c===!1&&this.opts.linebreaks===!0){this.exec("formatBlock","blockquote");var h=this.getBlock(),c=a('<div data-tagblock="">').html(a(h).html());a(h).replaceWith(c);var i=this.normalize(a(c).css("margin-left"))+this.opts.indentValue;a(c).css("margin-left",i+"px")}else{var j=this.getBlocks();a.each(j,a.proxy(function(b,c){var d=!1;if("TD"!==c.tagName){d=-1!==a.inArray(c.tagName,this.opts.alignmentTags)?a(c):a(c).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var e=this.normalize(d.css("margin-left"))+this.opts.indentValue;d.css("margin-left",e+"px")}},this))}this.selectionRestore()}else{this.selectionSave();var c=this.getBlock();if(c&&"LI"==c.tagName){var g=this.getBlocks(),k=0;this.insideOutdent(c,k,g)}else{var j=this.getBlocks();a.each(j,a.proxy(function(b,c){var d=!1;d=-1!==a.inArray(c.tagName,this.opts.alignmentTags)?a(c):a(c).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]);var e=this.normalize(d.css("margin-left"))-this.opts.indentValue;0>=e?this.opts.linebreaks===!0&&"undefined"!=typeof d.data("tagblock")?d.replaceWith(d.html()):(d.css("margin-left",""),this.removeEmptyAttr(d,"style")):d.css("margin-left",e+"px")},this))}this.selectionRestore()}this.sync()},insideOutdent:function(b,c,d){if(b&&"LI"==b.tagName){var e=a(b).parent().parent();0!=e.size()&&"LI"==e[0].tagName?e.after(b):"undefined"!=typeof d[c]?(b=d[c],c++,this.insideOutdent(b,c,d)):this.execCommand("insertunorderedlist")}},alignmentLeft:function(){this.alignmentSet("","JustifyLeft")},alignmentRight:function(){this.alignmentSet("right","JustifyRight")},alignmentCenter:function(){this.alignmentSet("center","JustifyCenter")},alignmentJustify:function(){this.alignmentSet("justify","JustifyFull")},alignmentSet:function(b,c){if(this.bufferSet(),this.oldIE())return this.document.execCommand(c,!1,!1),!0;this.selectionSave();var d=this.getBlock();if(!d&&this.opts.linebreaks){this.exec("formatBlock","blockquote");var e=this.getBlock(),d=a('<div data-tagblock="">').html(a(e).html());a(e).replaceWith(d),a(d).css("text-align",b),this.removeEmptyAttr(d,"style"),""==b&&"undefined"!=typeof a(d).data("tagblock")&&a(d).replaceWith(a(d).html())}else{var f=this.getBlocks();a.each(f,a.proxy(function(c,d){var e=!1;e=-1!==a.inArray(d.tagName,this.opts.alignmentTags)?a(d):a(d).closest(this.opts.alignmentTags.toString().toLowerCase(),this.$editor[0]),e&&(e.css("text-align",b),this.removeEmptyAttr(e,"style"))},this))}this.selectionRestore(),this.sync()},cleanEmpty:function(a){var b=this.placeholderStart(a);return b!==!1?b:(this.opts.linebreaks===!1&&(""===a?a=this.opts.emptyHtml:-1!==a.search(/^<hr\s?\/?>$/gi)&&(a="<hr>"+this.opts.emptyHtml)),a)},cleanConverters:function(a){return this.opts.convertDivs&&(a=a.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p$1>$2</p>")),this.opts.paragraphy&&(a=this.cleanParagraphy(a)),a},cleanConvertProtected:function(a){return this.opts.templateVars&&(a=a.replace(/\{\{(.*?)\}\}/gi,"<!-- template double $1 -->"),a=a.replace(/\{(.*?)\}/gi,"<!-- template $1 -->")),a=a.replace(/<script(.*?)>([\w\W]*?)<\/script>/gi,'<title type="text/javascript" style="display: none;" class="redactor-script-tag"$1>$2</title>'),a=a.replace(/<style(.*?)>([\w\W]*?)<\/style>/gi,'<section$1 style="display: none;" rel="redactor-style-tag">$2</section>'),a=a.replace(/<form(.*?)>([\w\W]*?)<\/form>/gi,'<section$1 rel="redactor-form-tag">$2</section>'),a=this.opts.phpTags?a.replace(/<\?php([\w\W]*?)\?>/gi,'<section style="display: none;" rel="redactor-php-tag">$1</section>'):a.replace(/<\?php([\w\W]*?)\?>/gi,"")},cleanReConvertProtected:function(a){return this.opts.templateVars&&(a=a.replace(/<!-- template double (.*?) -->/gi,"{{$1}}"),a=a.replace(/<!-- template (.*?) -->/gi,"{$1}")),a=a.replace(/<title type="text\/javascript" style="display: none;" class="redactor-script-tag"(.*?)>([\w\W]*?)<\/title>/gi,'<script$1 type="text/javascript">$2</script>'),a=a.replace(/<section(.*?) style="display: none;" rel="redactor-style-tag">([\w\W]*?)<\/section>/gi,"<style$1>$2</style>"),a=a.replace(/<section(.*?)rel="redactor-form-tag"(.*?)>([\w\W]*?)<\/section>/gi,"<form$1$2>$3</form>"),this.opts.phpTags&&(a=a.replace(/<section style="display: none;" rel="redactor-php-tag">([\w\W]*?)<\/section>/gi,"<?php\r\n$1\r\n?>")),a},cleanRemoveSpaces:function(b,c){if(c!==!1){var c=[],d=b.match(/<(pre|style|script|title)(.*?)>([\w\W]*?)<\/(pre|style|script|title)>/gi);if(null===d&&(d=[]),this.opts.phpTags){var e=b.match(/<\?php([\w\W]*?)\?>/gi);e&&(d=a.merge(d,e))}d&&a.each(d,function(a,d){b=b.replace(d,"buffer_"+a),c.push(d)})}return b=b.replace(/\n/g," "),b=b.replace(/[\t]*/g,""),b=b.replace(/\n\s*\n/g,"\n"),b=b.replace(/^[\s\n]*/g," "),b=b.replace(/[\s\n]*$/g," "),b=b.replace(/>\s{2,}</g,"> <"),b=this.cleanReplacer(b,c),b=b.replace(/\n\n/g,"\n")},cleanReplacer:function(b,c){return c===!1?b:(a.each(c,function(a,c){b=b.replace("buffer_"+a,c)}),b)},cleanRemoveEmptyTags:function(a){a=a.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),a=a.replace(/[\u200B-\u200D\uFEFF]/g,"");var b=["<b>\\s*</b>","<b>&nbsp;</b>","<em>\\s*</em>"],c=["<pre></pre>","<blockquote>\\s*</blockquote>","<dd></dd>","<dt></dt>","<ul></ul>","<ol></ol>","<li></li>","<table></table>","<tr></tr>","<span>\\s*<span>","<span>&nbsp;<span>","<p>\\s*</p>","<p></p>","<p>&nbsp;</p>","<p>\\s*<br>\\s*</p>","<div>\\s*</div>","<div>\\s*<br>\\s*</div>"];c=this.opts.removeEmptyTags?c.concat(b):b;for(var d=c.length,e=0;d>e;++e)a=a.replace(new RegExp(c[e],"gi"),"");return a},cleanParagraphy:function(b){function c(a,c,d){return b.replace(new RegExp(a,c),d)}if(b=a.trim(b),this.opts.linebreaks===!0)return b;if(""===b||"<p></p>"===b)return this.opts.emptyHtml;b+="\n";var d=[],e=b.match(/<(table|div|pre|object)(.*?)>([\w\W]*?)<\/(table|div|pre|object)>/gi);e||(e=[]);var f=b.match(/<!--([\w\W]*?)-->/gi);if(f&&(e=a.merge(e,f)),this.opts.phpTags){var g=b.match(/<section(.*?)rel="redactor-php-tag">([\w\W]*?)<\/section>/gi);g&&(e=a.merge(e,g))}e&&a.each(e,function(a,c){d[a]=c,b=b.replace(c,"{replace"+a+"}\n")}),b=b.replace(/<br \/>\s*<br \/>/gi,"\n\n");var h="(comment|html|body|head|title|meta|style|script|link|iframe|table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|option|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";b=c("(<"+h+"[^>]*>)","gi","\n$1"),b=c("(</"+h+">)","gi","$1\n\n"),b=c("\r\n","g","\n"),b=c("\r","g","\n"),b=c("/\n\n+/","g","\n\n");var i=b.split(new RegExp("\ns*\n","g"),-1);b="";for(var j in i)i.hasOwnProperty(j)&&(b+=-1==i[j].search("{replace")?"<p>"+i[j].replace(/^\n+|\n+$/g,"")+"</p>":i[j]);return b=c("<p>s*</p>","gi",""),b=c("<p>([^<]+)</(div|address|form)>","gi","<p>$1</p></$2>"),b=c("<p>s*(</?"+h+"[^>]*>)s*</p>","gi","$1"),b=c("<p>(<li.+?)</p>","gi","$1"),b=c("<p>s*(</?"+h+"[^>]*>)","gi","$1"),b=c("(</?"+h+"[^>]*>)s*</p>","gi","$1"),b=c("(</?"+h+"[^>]*>)s*<br />","gi","$1"),b=c("<br />(s*</?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","gi","$1"),b=c("\n</p>","gi","</p>"),b=c("<li><p>","gi","<li>"),b=c("</p></li>","gi","</li>"),b=c("</li><p>","gi","</li>"),b=c("<p>	?\n?<p>","gi","<p>"),b=c("</dt><p>","gi","</dt>"),b=c("</dd><p>","gi","</dd>"),b=c("<br></p></blockquote>","gi","</blockquote>"),b=c("<p>	*</p>","gi",""),a.each(d,function(a,c){b=b.replace("{replace"+a+"}",c)}),a.trim(b)},cleanConvertInlineTags:function(a,b){var c="strong";"b"===this.opts.boldTag&&(c="b");var d="em";return"i"===this.opts.italicTag&&(d="i"),a=a.replace(/<span style="font-style: italic;">([\w\W]*?)<\/span>/gi,"<"+d+">$1</"+d+">"),a=a.replace(/<span style="font-weight: bold;">([\w\W]*?)<\/span>/gi,"<"+c+">$1</"+c+">"),a="strong"===this.opts.boldTag?a.replace(/<b>([\w\W]*?)<\/b>/gi,"<strong>$1</strong>"):a.replace(/<strong>([\w\W]*?)<\/strong>/gi,"<b>$1</b>"),a="em"===this.opts.italicTag?a.replace(/<i>([\w\W]*?)<\/i>/gi,"<em>$1</em>"):a.replace(/<em>([\w\W]*?)<\/em>/gi,"<i>$1</i>"),a=b!==!0?a.replace(/<strike>([\w\W]*?)<\/strike>/gi,"<del>$1</del>"):a.replace(/<del>([\w\W]*?)<\/del>/gi,"<strike>$1</strike>")},cleanStripTags:function(b){if(""==b||"undefined"==typeof b)return b;var c=!1;this.opts.allowedTags!==!1&&(c=!0);var d=c===!0?this.opts.allowedTags:this.opts.deniedTags,e=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return b=b.replace(e,function(b,e){return c===!0?a.inArray(e.toLowerCase(),d)>"-1"?b:"":a.inArray(e.toLowerCase(),d)>"-1"?"":b}),b=this.cleanConvertInlineTags(b)},cleanSavePreCode:function(b,c){var d=b.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/gi);return null!==d&&a.each(d,a.proxy(function(a,d){var e=d.match(/<(pre|code)(.*?)>([\w\W]*?)<\/(pre|code)>/i);e[3]=e[3].replace(/&nbsp;/g," "),c!==!1&&(e[3]=this.cleanEncodeEntities(e[3])),b=b.replace(d,"<"+e[1]+e[2]+">"+e[3]+"</"+e[1]+">")},this)),b},cleanEncodeEntities:function(a){return a=String(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},cleanUnverified:function(){var b=this.$editor.find("li, img, a, b, strong, sub, sup, i, em, u, small, strike, del, span, cite");b.filter('[style*="background-color: transparent;"][style*="line-height"]').css("background-color","").css("line-height",""),b.filter('[style*="background-color: transparent;"]').css("background-color",""),b.css("line-height",""),a.each(b,a.proxy(function(a,b){this.removeEmptyAttr(b,"style")},this)),this.$editor.find('div[style="text-align: -webkit-auto;"]').contents().unwrap()},cleanHtml:function(a){var b=0,c=a.length,d=0,e=null,f=null,g="",h="",i="";for(this.cleanlevel=0;c>b;b++){if(d=b,-1==a.substr(b).indexOf("<"))return h+=a.substr(b),this.cleanFinish(h);for(;c>d&&"<"!=a.charAt(d);)d++;for(b!=d&&(i=a.substr(b,d-b),i.match(/^\s{2,}$/g)||("\n"==h.charAt(h.length-1)?h+=this.cleanGetTabs():"\n"==i.charAt(0)&&(h+="\n"+this.cleanGetTabs(),i=i.replace(/^\s+/,"")),h+=i),i.match(/\n/)&&(h+="\n"+this.cleanGetTabs())),e=d;c>d&&">"!=a.charAt(d);)d++;g=a.substr(e,d-e),b=d;var j;if("!--"==g.substr(1,3)){if(!g.match(/--$/)){for(;"-->"!=a.substr(d,3);)d++;d+=2,g=a.substr(e,d-e),b=d}"\n"!=h.charAt(h.length-1)&&(h+="\n"),h+=this.cleanGetTabs(),h+=g+">\n"}else"!"==g[1]?h=this.placeTag(g+">",h):"?"==g[1]?h+=g+">\n":(j=g.match(/^<(script|style|pre)/i))?(j[1]=j[1].toLowerCase(),g=this.cleanTag(g),h=this.placeTag(g,h),f=String(a.substr(b+1)).toLowerCase().indexOf("</"+j[1]),f&&(i=a.substr(b+1,f),b+=f,h+=i)):(g=this.cleanTag(g),h=this.placeTag(g,h))}return this.cleanFinish(h)},cleanGetTabs:function(){for(var a="",b=0;b<this.cleanlevel;b++)a+="	";return a},cleanFinish:function(a){return a=a.replace(/\n\s*\n/g,"\n"),a=a.replace(/^[\s\n]*/,""),a=a.replace(/[\s\n]*$/,""),a=a.replace(/<script(.*?)>\n<\/script>/gi,"<script$1></script>"),this.cleanlevel=0,a},cleanTag:function(a){var b="";a=a.replace(/\n/g," "),a=a.replace(/\s{2,}/g," "),a=a.replace(/^\s+|\s+$/g," ");var c="";a.match(/\/$/)&&(c="/",a=a.replace(/\/+$/,""));for(var d;d=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(a);)d[2]?b+=d[1].toLowerCase()+"="+d[2]:d[1]&&(b+=d[1].toLowerCase()),b+=" ",a=a.substr(d[0].length);return b.replace(/\s*$/,"")+c+">"},placeTag:function(a,b){var c=a.match(this.cleannewLevel);return(a.match(this.cleanlineBefore)||c)&&(b=b.replace(/\s*$/,""),b+="\n"),c&&"/"==a.charAt(1)&&this.cleanlevel--,"\n"==b.charAt(b.length-1)&&(b+=this.cleanGetTabs()),c&&"/"!=a.charAt(1)&&this.cleanlevel++,b+=a,(a.match(this.cleanlineAfter)||a.match(this.cleannewLevel))&&(b=b.replace(/ *$/,""),b+="\n"),b},formatEmpty:function(b){var c=a.trim(this.$editor.html());if(this.opts.linebreaks)""==c&&(b.preventDefault(),this.$editor.html(""),this.focus());else{c=c.replace(/<br\s?\/?>/i,"");var d=c.replace(/<p>\s?<\/p>/gi,"");if(""===c||""===d){b.preventDefault();var e=a(this.opts.emptyHtml).get(0);this.$editor.html(e),this.focus()}}this.sync()},formatBlocks:function(b){this.bufferSet();var c=this.getBlocks();this.selectionSave(),a.each(c,a.proxy(function(c,d){if("LI"!==d.tagName){var e=a(d).parent();if("p"===b){if("P"===d.tagName&&0!=e.size()&&"BLOCKQUOTE"===e[0].tagName||"BLOCKQUOTE"===d.tagName)return void this.formatQuote();if(this.opts.linebreaks)return;this.formatBlock(b,d)}else this.formatBlock(b,d)}},this)),this.selectionRestore(),this.sync()},formatBlock:function(b,c){if(c===!1&&(c=this.getBlock()),c===!1)return this.opts.linebreaks===!0&&this.execCommand("formatblock",b),!0;var d="";if("pre"!==b?d=a(c).contents():(d=a(c).html(),""===a.trim(d)&&(d='<span id="selection-marker-1"></span>')),"PRE"===c.tagName&&(b="p"),this.opts.linebreaks===!0&&"p"===b)a(c).replaceWith(a("<div>").append(d).html()+"<br>");else{var e=this.getParent(),f=a("<"+b+">").append(d);a(c).replaceWith(f),e&&"TD"==e.tagName&&a(f).wrapAll("<td>")}},formatChangeTag:function(b,c,d){d!==!1&&this.selectionSave();var e=a("<"+c+"/>");return a(b).replaceWith(function(){return e.append(a(this).contents())}),d!==!1&&this.selectionRestore(),e},formatQuote:function(){if(this.bufferSet(),this.opts.linebreaks===!1){this.selectionSave();var b=this.getBlocks(),c=!1,d=b.length;if(b){var e="",f="",g=!1,h=!0;if(a.each(b,function(a,b){"P"!==b.tagName&&(h=!1)}),a.each(b,a.proxy(function(i,j){if("BLOCKQUOTE"===j.tagName)this.formatBlock("p",j,!1);else if("P"===j.tagName)if(c=a(j).parent(),"BLOCKQUOTE"==c[0].tagName){var k=a(c).children("p").size();1==k?a(c).replaceWith(j):k==d?(g="blockquote",e+=this.outerHtml(j)):(g="html",e+=this.outerHtml(j),0==i?(a(j).addClass("redactor-replaced").empty(),f=this.outerHtml(j)):a(j).remove())}else h===!1||1==b.length?this.formatBlock("blockquote",j,!1):(g="paragraphs",e+=this.outerHtml(j));else"LI"!==j.tagName&&this.formatBlock("blockquote",j,!1)},this)),g)if("paragraphs"==g)a(b[0]).replaceWith("<blockquote>"+e+"</blockquote>"),a(b).remove();else if("blockquote"==g)a(c).replaceWith(e);else if("html"==g){var i=this.$editor.html().replace(f,"</blockquote>"+e+"<blockquote>");this.$editor.html(i),this.$editor.find("blockquote").each(function(){""==a.trim(a(this).html())&&a(this).remove()})}}this.selectionRestore()}else{var j=this.getBlock();if("BLOCKQUOTE"===j.tagName){this.selectionSave();var i=a.trim(a(j).html()),k=a.trim(this.getSelectionHtml());if(i=i.replace(/<span(.*?)id="selection-marker(.*?)<\/span>/gi,""),i==k)a(j).replaceWith(a(j).html()+"<br>");else{this.inlineFormat("tmp");var l=this.$editor.find("tmp");l.empty();var m=this.$editor.html().replace("<tmp></tmp>",'</blockquote><span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"+k+"<blockquote>");this.$editor.html(m),l.remove(),this.$editor.find("blockquote").each(function(){""==a.trim(a(this).html())&&a(this).remove()})}this.selectionRestore(),this.$editor.find("span#selection-marker-1").attr("id",!1)}else{var n=this.selectionWrap("blockquote"),i=a(n).html(),o=["ul","ol","table","tr","tbody","thead","tfoot","dl"];a.each(o,function(a,b){i=i.replace(new RegExp("<"+b+"(.*?)>","gi"),""),i=i.replace(new RegExp("</"+b+">","gi"),"")});var p=this.opts.blockLevelElements;p.push("td"),a.each(p,function(a,b){i=i.replace(new RegExp("<"+b+"(.*?)>","gi"),""),i=i.replace(new RegExp("</"+b+">","gi"),"<br>")}),a(n).html(i),this.selectionElement(n);var q=a(n).next();0!=q.size()&&"BR"===q[0].tagName&&q.remove()}}this.sync()},blockRemoveAttr:function(b){var c=this.getBlocks();a(c).removeAttr(b),this.sync()},blockSetAttr:function(b,c){var d=this.getBlocks();a(d).attr(b,c),this.sync()},blockRemoveStyle:function(b){var c=this.getBlocks();a(c).css(b,""),this.removeEmptyAttr(c,"style"),this.sync()},blockSetStyle:function(b,c){var d=this.getBlocks();a(d).css(b,c),this.sync()},blockRemoveClass:function(b){var c=this.getBlocks();a(c).removeClass(b),this.removeEmptyAttr(c,"class"),this.sync()},blockSetClass:function(b){var c=this.getBlocks();a(c).addClass(b),this.sync()},inlineRemoveClass:function(b){this.selectionSave(),this.inlineEachNodes(function(c){a(c).removeClass(b),this.removeEmptyAttr(c,"class")}),this.selectionRestore(),this.sync()},inlineSetClass:function(b){var c=this.getCurrent();a(c).hasClass(b)||this.inlineMethods("addClass",b)},inlineRemoveStyle:function(b){this.selectionSave(),this.inlineEachNodes(function(c){a(c).css(b,""),this.removeEmptyAttr(c,"style")}),this.selectionRestore(),this.sync()},inlineSetStyle:function(a,b){this.inlineMethods("css",a,b)},inlineRemoveAttr:function(b){this.selectionSave();var c=this.getRange(),d=this.getElement(),e=this.getNodes();(c.collapsed||c.startContainer===c.endContainer&&d)&&(e=a(d)),a(e).removeAttr(b),this.inlineUnwrapSpan(),this.selectionRestore(),this.sync()},inlineSetAttr:function(a,b){this.inlineMethods("attr",a,b)},inlineMethods:function(b,c,d){this.bufferSet(),this.selectionSave();var e=this.getRange(),f=this.getElement();if(!e.collapsed&&e.startContainer!==e.endContainer||!f||this.nodeTestBlocks(f)){this.document.execCommand("fontSize",!1,4);var g=this.$editor.find("font");a.each(g,a.proxy(function(a,e){this.inlineSetMethods(b,e,c,d)},this))}else a(f)[b](c,d);this.selectionRestore(),this.sync()},inlineSetMethods:function(b,c,d,e){var f,g=a(c).parent();return g&&"INLINE"===g[0].tagName&&0!=g[0].attributes.length?(f=g,a(c).replaceWith(a(c).html())):(f=a("<inline>").append(a(c).contents()),a(c).replaceWith(f)),a(f)[b](d,e),f},inlineEachNodes:function(b){var c,d=this.getRange(),e=this.getElement(),f=this.getNodes();(d.collapsed||d.startContainer===d.endContainer&&e)&&(f=a(e),c=!0),a.each(f,a.proxy(function(d,e){if(!c&&"INLINE"!==e.tagName){if("INLINE"!==e.parentNode.tagName||a(e.parentNode).hasClass("redactor_editor"))return;e=e.parentNode}b.call(this,e)},this))},inlineUnwrapSpan:function(){var b=this.$editor.find("inline");a.each(b,a.proxy(function(b,c){var d=a(c);void 0===d.attr("class")&&void 0===d.attr("style")&&d.contents().unwrap()},this))},inlineFormat:function(b){this.selectionSave(),this.document.execCommand("fontSize",!1,4);var c,d=this.$editor.find("font");a.each(d,function(d,e){var f=a("<"+b+"/>").append(a(e).contents());a(e).replaceWith(f),c=f}),this.selectionRestore(),this.sync()},inlineRemoveFormat:function(b){this.selectionSave();var c=b.toUpperCase(),d=this.getNodes(),e=a(this.getParent()).parent();a.each(d,function(a,b){b.tagName===c&&this.inlineRemoveFormatReplace(b)}),e&&e[0].tagName===c&&this.inlineRemoveFormatReplace(e),this.selectionRestore(),this.sync()},inlineRemoveFormatReplace:function(b){a(b).replaceWith(a(b).contents())},insertHtml:function(b,c){var d=this.getCurrent(),e=d.parentNode;this.$editor.focus(),this.bufferSet();var f=a("<div>").append(a.parseHTML(b));b=f.html(),b=this.cleanRemoveEmptyTags(b),f=a("<div>").append(a.parseHTML(b));var g=this.getBlock();if(1==f.contents().length){var h=f.contents()[0].tagName;("P"!=h&&h==g.tagName||"PRE"==h)&&(b=f.text(),f=a("<div>").append(b))
}!this.opts.linebreaks&&1==f.contents().length&&3==f.contents()[0].nodeType&&(this.getRangeSelectedNodes().length>2||!d||"BODY"==d.tagName&&!e||"HTML"==e.tagName)&&(b="<p>"+b+"</p>"),b=this.setSpansVerifiedHtml(b),f.contents().length>1&&g||f.contents().is("p, :header, ul, ol, li, div, table, td, blockquote, pre, address, section, header, footer, aside, article")?this.browser("msie")?this.document.selection.createRange().pasteHTML(b):this.document.execCommand("inserthtml",!1,b):this.insertHtmlAdvanced(b,!1),this.selectall&&this.window.setTimeout(a.proxy(function(){this.opts.linebreaks?this.focusEnd():this.selectionEnd(this.$editor.contents().last())},this),1),this.observeStart(),this.setNonEditable(),c!==!1&&this.sync()},insertHtmlAdvanced:function(a,b){var c=this.getSelection();if(c.getRangeAt&&c.rangeCount){var d=c.getRangeAt(0);d.deleteContents();var e=this.document.createElement("div");e.innerHTML=a;for(var f,g,h=this.document.createDocumentFragment();f=e.firstChild;)g=h.appendChild(f);d.insertNode(h),g&&(d=d.cloneRange(),d.setStartAfter(g),d.collapse(!0),c.removeAllRanges(),c.addRange(d))}b!==!1&&this.sync()},insertBeforeCursor:function(b){b=this.setSpansVerifiedHtml(b);var c=a(b),d=document.createElement("span");d.innerHTML="​";var e=this.getRange();e.insertNode(d),e.insertNode(c[0]),e.collapse(!1);var f=this.getSelection();f.removeAllRanges(),f.addRange(e),this.sync()},insertText:function(b){var c=a(a.parseHTML(b));c.length&&(b=c.text()),this.$editor.focus(),this.browser("msie")?this.document.selection.createRange().pasteHTML(b):this.document.execCommand("inserthtml",!1,b),this.sync()},insertNode:function(b){if(b=b[0]||b,"SPAN"==b.tagName){var c="inline",d=b.outerHTML,e=new RegExp("<"+b.tagName,"i"),f=d.replace(e,"<"+c);e=new RegExp("</"+b.tagName,"i"),f=f.replace(e,"</"+c),b=a(f)[0]}var g=this.getSelection();g.getRangeAt&&g.rangeCount&&(range=g.getRangeAt(0),range.deleteContents(),range.insertNode(b),range.setEndAfter(b),range.setStartAfter(b),g.removeAllRanges(),g.addRange(range))},insertNodeToCaretPositionFromPoint:function(a,b){var c,d=a.clientX,e=a.clientY;if(this.document.caretPositionFromPoint){var f=this.document.caretPositionFromPoint(d,e);c=this.getRange(),c.setStart(f.offsetNode,f.offset),c.collapse(!0),c.insertNode(b)}else if(this.document.caretRangeFromPoint)c=this.document.caretRangeFromPoint(d,e),c.insertNode(b);else if("undefined"!=typeof document.body.createTextRange){c=this.document.body.createTextRange(),c.moveToPoint(d,e);var g=c.duplicate();g.moveToPoint(d,e),c.setEndPoint("EndToEnd",g),c.select()}},insertAfterLastElement:function(b,c){if("undefined"!=typeof c&&(b=c),this.isEndOfElement()){if(this.opts.linebreaks){var d=a("<div>").append(a.trim(this.$editor.html())).contents();if(this.outerHtml(d.last()[0])!=this.outerHtml(b))return!1}else if(this.$editor.contents().last()[0]!==b)return!1;this.insertingAfterLastElement(b)}},insertingAfterLastElement:function(b){if(this.bufferSet(),this.opts.linebreaks===!1){var c=a(this.opts.emptyHtml);a(b).after(c),this.selectionStart(c)}else{var c=a('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>",this.document)[0];a(b).after(c),a(c).after(this.opts.invisibleSpace),this.selectionRestore(),this.$editor.find("span#selection-marker-1").removeAttr("id")}},insertLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()},insertDoubleLineBreak:function(){this.selectionSave(),this.$editor.find("#selection-marker-1").before("<br><br>"+(this.browser("webkit")?this.opts.invisibleSpace:"")),this.selectionRestore()},replaceLineBreak:function(b){var c=a("<br>"+this.opts.invisibleSpace);a(b).replaceWith(c),this.selectionStart(c)},pasteClean:function(b){if(b=this.callback("pasteBefore",!1,b),this.browser("msie")){var c=a.trim(b);0==c.search(/^<a(.*?)>(.*?)<\/a>$/i)&&(b=b.replace(/^<a(.*?)>(.*?)<\/a>$/i,"$2"))}if(this.opts.pastePlainText){var c=this.document.createElement("div");return b=b.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n"),c.innerHTML=b,b=c.textContent||c.innerText,b=a.trim(b),b=b.replace("\n","<br>"),b=this.cleanParagraphy(b),this.pasteInsert(b),!1}if(this.currentOrParentIs("PRE"))return b=this.pastePre(b),this.pasteInsert(b),!0;if(b=b.replace(/<p(.*?)class="MsoListParagraphCxSpFirst"([\w\W]*?)<\/p>/gi,"<ul><li$2</li>"),b=b.replace(/<p(.*?)class="MsoListParagraphCxSpMiddle"([\w\W]*?)<\/p>/gi,"<li$2</li>"),b=b.replace(/<p(.*?)class="MsoListParagraphCxSpLast"([\w\W]*?)<\/p>/gi,"<li$2</li></ul>"),b=b.replace(/<p(.*?)class="MsoListParagraph"([\w\W]*?)<\/p>/gi,"<ul><li$2</li></ul>"),b=b.replace(/·/g,""),b=b.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),b=b.replace(/(&nbsp;){2,}/gi,"&nbsp;"),b=b.replace(/&nbsp;/gi," "),b=b.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),b=b.replace(/<b(.*?)id="docs-internal-guid(.*?)">([\w\W]*?)<\/b>/gi,"$3"),b=this.cleanStripTags(b),b=b.replace(/<td><\/td>/gi,"[td]"),b=b.replace(/<td>&nbsp;<\/td>/gi,"[td]"),b=b.replace(/<td><br><\/td>/gi,"[td]"),b=b.replace(/<td(.*?)colspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td colspan="$2"]$4[/td]'),b=b.replace(/<td(.*?)rowspan="(.*?)"(.*?)>([\w\W]*?)<\/td>/gi,'[td rowspan="$2"]$4[/td]'),b=b.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),b=b.replace(/<iframe(.*?)>([\w\W]*?)<\/iframe>/gi,"[iframe$1]$2[/iframe]"),b=b.replace(/<video(.*?)>([\w\W]*?)<\/video>/gi,"[video$1]$2[/video]"),b=b.replace(/<audio(.*?)>([\w\W]*?)<\/audio>/gi,"[audio$1]$2[/audio]"),b=b.replace(/<embed(.*?)>([\w\W]*?)<\/embed>/gi,"[embed$1]$2[/embed]"),b=b.replace(/<object(.*?)>([\w\W]*?)<\/object>/gi,"[object$1]$2[/object]"),b=b.replace(/<param(.*?)>/gi,"[param$1]"),b=b.replace(/<img(.*?)>/gi,"[img$1]"),b=b.replace(/ class="(.*?)"/gi,""),b=b.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),b=b.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/<div>\s*?\t*?\n*?(<ul>|<ol>|<p>)/gi,"$1"),b=b.replace(/\[td colspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td colspan="$1">$2</td>'),b=b.replace(/\[td rowspan="(.*?)"\]([\w\W]*?)\[\/td\]/gi,'<td rowspan="$1">$2</td>'),b=b.replace(/\[td\]/gi,"<td>&nbsp;</td>"),b=b.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),b=b.replace(/\[iframe(.*?)\]([\w\W]*?)\[\/iframe\]/gi,"<iframe$1>$2</iframe>"),b=b.replace(/\[video(.*?)\]([\w\W]*?)\[\/video\]/gi,"<video$1>$2</video>"),b=b.replace(/\[audio(.*?)\]([\w\W]*?)\[\/audio\]/gi,"<audio$1>$2</audio>"),b=b.replace(/\[embed(.*?)\]([\w\W]*?)\[\/embed\]/gi,"<embed$1>$2</embed>"),b=b.replace(/\[object(.*?)\]([\w\W]*?)\[\/object\]/gi,"<object$1>$2</object>"),b=b.replace(/\[param(.*?)\]/gi,"<param$1>"),b=b.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"),b=b.replace(/<\/div><p>/gi,"<p>"),b=b.replace(/<\/p><\/div>/gi,"</p>")),b=this.currentOrParentIs("LI")?b.replace(/<p>([\w\W]*?)<\/p>/gi,"$1<br>"):this.cleanParagraphy(b),b=b.replace(/<span(.*?)>([\w\W]*?)<\/span>/gi,"$2"),b=b.replace(/<img>/gi,""),b=b.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/\n{3,}/gi,"\n"),b=b.replace(/<p><p>/gi,"<p>"),b=b.replace(/<\/p><\/p>/gi,"</p>"),b=b.replace(/<li>(\s*|\t*|\n*)<p>/gi,"<li>"),b=b.replace(/<\/p>(\s*|\t*|\n*)<\/li>/gi,"</li>"),this.opts.linebreaks===!0&&(b=b.replace(/<p(.*?)>([\w\W]*?)<\/p>/gi,"$2<br>")),b=b.replace(/<[^\/>][^>][^img|param|source]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),b=b.replace(/<img src="webkit-fake-url\:\/\/(.*?)"(.*?)>/gi,""),b=b.replace(/<td(.*?)>(\s*|\t*|\n*)<p>([\w\W]*?)<\/p>(\s*|\t*|\n*)<\/td>/gi,"<td$1>$3</td>"),b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),b=b.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"$2"),this.pasteClipboardMozilla=!1,this.browser("mozilla")){if(this.opts.clipboardUpload){var d=b.match(/<img src="data:image(.*?)"(.*?)>/gi);if(null!==d){this.pasteClipboardMozilla=d;for(k in d){var e=d[k].replace("<img",'<img data-mozilla-paste-image="'+k+'" ');b=b.replace(d[k],e)}}}for(;/<br>$/gi.test(b);)b=b.replace(/<br>$/gi,"")}for(b=b.replace(/<p>•([\w\W]*?)<\/p>/gi,"<li>$1</li>");/<font>([\w\W]*?)<\/font>/gi.test(b);)b=b.replace(/<font>([\w\W]*?)<\/font>/gi,"$1");this.pasteInsert(b)},pastePre:function(a){a=a.replace(/<br>|<\/H[1-6]>|<\/p>|<\/div>/gi,"\n");var b=this.document.createElement("div");return b.innerHTML=a,this.cleanEncodeEntities(b.textContent||b.innerText)},pasteInsert:function(b){this.selectall&&(this.$editor.html(this.opts.linebreaks?"":this.opts.emptyHtml),this.$editor.focus()),b=this.callback("pasteAfter",!1,b),this.insertHtml(b),this.selectall=!1,setTimeout(a.proxy(function(){this.rtePaste=!1,this.browser("mozilla")&&this.$editor.find("p:empty").remove(),this.pasteClipboardMozilla!==!1&&this.pasteClipboardUploadMozilla()},this),100),this.opts.autoresize&&this.fullscreen!==!0?a(this.document.body).scrollTop(this.saveScroll):this.$editor.scrollTop(this.saveScroll)},pasteClipboardUploadMozilla:function(){var b=this.$editor.find("img[data-mozilla-paste-image]");a.each(b,a.proxy(function(b,c){var d=a(c),e=c.src.split(","),f=e[1],g=e[0].split(";")[0].split(":")[1];a.post(this.opts.clipboardUploadUrl,{contentType:g,data:f},a.proxy(function(b){var c="string"==typeof b?a.parseJSON(b):b;d.attr("src",c.filelink),d.removeAttr("data-mozilla-paste-image"),this.sync(),this.callback("imageUpload",d,c)},this))},this))},pasteClipboardUpload:function(b){var c=b.target.result,d=c.split(","),e=d[1],f=d[0].split(";")[0].split(":")[1];this.opts.clipboardUpload?a.post(this.opts.clipboardUploadUrl,{contentType:f,data:e},a.proxy(function(b){var c="string"==typeof b?a.parseJSON(b):b,d='<img src="'+c.filelink+'" id="clipboard-image-marker" />';this.execCommand("inserthtml",d,!1);var e=a(this.$editor.find("img#clipboard-image-marker"));e.length?e.removeAttr("id"):e=!1,this.sync(),e&&this.callback("imageUpload",e,c)},this)):this.insertHtml('<img src="'+c+'" />')},bufferSet:function(a){void 0!==a?this.opts.buffer.push(a):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRemoveMarkers("buffer"))},bufferUndo:function(){return 0===this.opts.buffer.length?void this.$editor.focus():(this.selectionSave(),this.opts.rebuffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.buffer.pop()),this.selectionRestore(),void setTimeout(a.proxy(this.observeStart,this),100))},bufferRedo:function(){return 0===this.opts.rebuffer.length?(this.$editor.focus(),!1):(this.selectionSave(),this.opts.buffer.push(this.$editor.html()),this.selectionRestore(!1,!0),this.$editor.html(this.opts.rebuffer.pop()),this.selectionRestore(!0),void setTimeout(a.proxy(this.observeStart,this),4))},observeStart:function(){this.observeImages(),this.opts.observeLinks&&this.observeLinks()},observeLinks:function(){this.$editor.find("a").on("click",a.proxy(this.linkObserver,this)),this.$editor.on("click.redactor",a.proxy(function(a){this.linkObserverTooltipClose(a)},this))},observeImages:function(){return this.opts.observeImages===!1?!1:void this.$editor.find("img").each(a.proxy(function(b,c){this.browser("msie")&&a(c).attr("unselectable","on"),this.imageResize(c)},this))},linkObserver:function(b){var c=a(b.target),d=c.offset();if(this.opts.iframe){var e=this.$frame.offset();d.top=e.top+(d.top-a(this.document).scrollTop()),d.left+=e.left}var f=a('<span class="redactor-link-tooltip"></span>'),g=c.attr("href");g.length>24&&(g=g.substring(0,24)+"...");var h=a('<a href="'+c.attr("href")+'" target="_blank">'+g+"</a>").on("click",a.proxy(function(){this.linkObserverTooltipClose(!1)},this)),i=a('<a href="#">'+this.opts.curLang.edit+"</a>").on("click",a.proxy(function(a){a.preventDefault(),this.linkShow(),this.linkObserverTooltipClose(!1)},this)),j=a('<a href="#">'+this.opts.curLang.unlink+"</a>").on("click",a.proxy(function(a){a.preventDefault(),this.execCommand("unlink"),this.linkObserverTooltipClose(!1)},this));f.append(h),f.append(" | "),f.append(i),f.append(" | "),f.append(j),f.css({top:d.top+20+"px",left:d.left+"px"}),a(".redactor-link-tooltip").remove(),a("body").append(f)},linkObserverTooltipClose:function(b){return b!==!1&&"A"==b.target.tagName?!1:void a(".redactor-link-tooltip").remove()},getSelection:function(){return this.opts.rangy?this.opts.iframe?rangy.getSelection(this.$frame[0]):rangy.getSelection():this.document.getSelection()},getRange:function(){if(this.opts.rangy)return this.opts.iframe?rangy.createRange(this.iframeDoc()):rangy.createRange();if(this.document.getSelection){var a=this.getSelection();if(a.getRangeAt&&a.rangeCount)return a.getRangeAt(0)}return this.document.createRange()},selectionElement:function(a){this.setCaret(a)},selectionStart:function(a){this.selectionSet(a[0]||a,0,null,0)},selectionEnd:function(a){this.selectionSet(a[0]||a,1,null,1)},selectionSet:function(a,b,c,d){null==c&&(c=a),null==d&&(d=b);var e=this.getSelection();if(e){var f=this.getRange();f.setStart(a,b),f.setEnd(c,d);try{e.removeAllRanges()}catch(g){}e.addRange(f)}},selectionWrap:function(a){a=a.toLowerCase();var b=this.getBlock();if(b){var c=this.formatChangeTag(b,a);return this.sync(),c}var d=this.getSelection(),e=d.getRangeAt(0),c=document.createElement(a);return c.appendChild(e.extractContents()),e.insertNode(c),this.selectionElement(c),c},selectionAll:function(){var a=this.getRange();a.selectNodeContents(this.$editor[0]);var b=this.getSelection();b.removeAllRanges(),b.addRange(a)},selectionRemove:function(){this.getSelection().removeAllRanges()},getCaretOffset:function(b){var c=0,d=this.getRange(),e=d.cloneRange();return e.selectNodeContents(b),e.setEnd(d.endContainer,d.endOffset),c=a.trim(e.toString()).length},getCaretOffsetRange:function(){return new d(this.getSelection().getRangeAt(0))},setCaret:function(a,b,c){"undefined"==typeof c&&(c=b),a=a[0]||a;var d=this.getRange();d.selectNodeContents(a);var e,f=this.getTextNodesIn(a),g=!1,h=0;if(1==f.length&&b)d.setStart(f[0],b),d.setEnd(f[0],c);else for(var i,j=0;i=f[j++];){if(e=h+i.length,!g&&b>=h&&(e>b||b==e&&j<f.length)&&(d.setStart(i,b-h),g=!0),g&&e>=c){d.setEnd(i,c-h);break}h=e}var k=this.getSelection();k.removeAllRanges(),k.addRange(d)},getTextNodesIn:function(a){var b=[];if(3==a.nodeType)b.push(a);else for(var c=a.childNodes,d=0,e=c.length;e>d;++d)b.push.apply(b,this.getTextNodesIn(c[d]));return b},getCurrent:function(){var a=!1,b=this.getSelection();return b.rangeCount>0&&(a=b.getRangeAt(0).startContainer),this.isParentRedactor(a)},getParent:function(b){return b=b||this.getCurrent(),b?this.isParentRedactor(a(b).parent()[0]):!1},getBlock:function(b){for("undefined"==typeof b&&(b=this.getCurrent());b;){if(this.nodeTestBlocks(b))return a(b).hasClass("redactor_editor")?!1:b;b=b.parentNode}return!1},getBlocks:function(b){var c=[];if("undefined"==typeof b){var d=this.getRange();if(d&&d.collapsed===!0)return[this.getBlock()];var b=this.getNodes(d)}return a.each(b,a.proxy(function(b,d){return this.opts.iframe===!1&&0==a(d).parents("div.redactor_editor").size()?!1:void(this.nodeTestBlocks(d)&&c.push(d))},this)),0===c.length&&(c=[this.getBlock()]),c},nodeTestBlocks:function(a){return 1==a.nodeType&&this.rTestBlock.test(a.nodeName)},tagTestBlock:function(a){return this.rTestBlock.test(a)},getNodes:function(b,c){if("undefined"==typeof b||0==b)var b=this.getRange();if(b&&b.collapsed===!0){if("undefined"==typeof c&&this.tagTestBlock(c)){var d=this.getBlock();return d.tagName==c?[d]:[]}return[this.getCurrent()]}var e=[],f=[],g=this.document.getSelection();if(g.isCollapsed||(e=this.getRangeSelectedNodes(g.getRangeAt(0))),a.each(e,a.proxy(function(b,d){return this.opts.iframe===!1&&0==a(d).parents("div.redactor_editor").size()?!1:void("undefined"==typeof c?""!=a.trim(d.textContent)&&f.push(d):d.tagName==c&&f.push(d))},this)),0==f.length){if("undefined"==typeof c&&this.tagTestBlock(c)){var d=this.getBlock();return d.tagName==c?f.push(d):[]}f.push(this.getCurrent())}var h=f[f.length-1];return this.nodeTestBlocks(h)&&(f=f.slice(0,-1)),f},getElement:function(b){for(b||(b=this.getCurrent());b;){if(1==b.nodeType)return a(b).hasClass("redactor_editor")?!1:b;b=b.parentNode}return!1},getRangeSelectedNodes:function(a){a=a||this.getRange();var b=a.startContainer,c=a.endContainer;if(b==c)return[b];for(var d=[];b&&b!=c;)d.push(b=this.nextNode(b));for(b=a.startContainer;b&&b!=a.commonAncestorContainer;)d.unshift(b),b=b.parentNode;return d},nextNode:function(a){if(a.hasChildNodes())return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null},getSelectionText:function(){return this.getSelection().toString()},getSelectionHtml:function(){var a="",b=this.getSelection();if(b.rangeCount){for(var c=this.document.createElement("div"),d=b.rangeCount,e=0;d>e;++e)c.appendChild(b.getRangeAt(e).cloneContents());a=c.innerHTML}return this.syncClean(a)},selectionSave:function(){this.isFocused()||this.$editor.focus(),this.opts.rangy?this.savedSel=rangy.saveSelection():this.selectionCreateMarker(this.getRange())},selectionCreateMarker:function(b){if(b){var c=a('<span id="selection-marker-1" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0],d=a('<span id="selection-marker-2" class="redactor-selection-marker">'+this.opts.invisibleSpace+"</span>",this.document)[0];b.collapsed===!0?this.selectionSetMarker(b,c,!0):(this.selectionSetMarker(b,c,!0),this.selectionSetMarker(b,d,!1)),this.savedSel=this.$editor.html(),this.selectionRestore(!1,!1)}},selectionSetMarker:function(a,b,c){var d=a.cloneRange();d.collapse(c),d.insertNode(b),d.detach()},selectionRestore:function(a,b){if(this.opts.rangy)rangy.restoreSelection(this.savedSel);else{a===!0&&this.savedSel&&this.$editor.html(this.savedSel);var c=this.$editor.find("span#selection-marker-1"),d=this.$editor.find("span#selection-marker-2");this.browser("mozilla")?this.$editor.focus():this.isFocused()||this.$editor.focus(),0!=c.length&&0!=d.length?this.selectionSet(c[0],0,d[0],0):0!=c.length&&this.selectionSet(c[0],0,null,0),b!==!1&&(this.selectionRemoveMarkers(),this.savedSel=!1)}},selectionRemoveMarkers:function(){this.opts.rangy?rangy.removeMarkers(this.savedSel):a.each(this.$editor.find("span.redactor-selection-marker"),function(){var b=a.trim(a(this).html().replace(/[^\u0000-\u1C7F]/g,""));""==b?a(this).remove():a(this).removeAttr("class").removeAttr("id")})},tableShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.table,this.opts.modal_table,300,a.proxy(function(){a("#redactor_insert_table_btn").click(a.proxy(this.tableInsert,this)),setTimeout(function(){a("#redactor_table_rows").focus()},200)},this))},tableInsert:function(){var b,c,d,e,f=a("#redactor_table_rows").val(),g=a("#redactor_table_columns").val(),h=a("<div></div>"),i=Math.floor(99999*Math.random()),j=a('<table id="table'+i+'"><tbody></tbody></table>');for(b=0;f>b;b++){for(c=a("<tr></tr>"),d=0;g>d;d++)e=a("<td>"+this.opts.invisibleSpace+"</td>"),0===b&&0===d&&e.append('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),a(c).append(e);j.append(c)}h.append(j);var k=h.html();this.modalClose(),this.selectionRestore();var l=this.getBlock()||this.getCurrent();l&&"BODY"!=l.tagName?a(l).after(k):this.insertHtmlAdvanced(k,!1),this.selectionRestore();var m=this.$editor.find("#table"+i);this.buttonActiveObserver(),m.find("span#selection-marker-1").remove(),m.removeAttr("id"),this.sync()},tableDeleteTable:function(){var b=a(this.getParent()).closest("table");return this.isParentRedactor(b)?0==b.size()?!1:(this.bufferSet(),b.remove(),void this.sync()):!1},tableDeleteRow:function(){var b=a(this.getParent()).closest("table");if(!this.isParentRedactor(b))return!1;if(0==b.size())return!1;this.bufferSet();var c=a(this.getParent()).closest("tr"),d=c.prev().length?c.prev():c.next();if(d.length){var e=d.children("td").first();e.length&&e.prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>")}c.remove(),this.selectionRestore(),this.sync()},tableDeleteColumn:function(){var b=a(this.getParent()).closest("table");if(!this.isParentRedactor(b))return!1;if(0==b.size())return!1;this.bufferSet();var c=a(this.getParent()).closest("td"),d=c.get(0).cellIndex;b.find("tr").each(a.proxy(function(b,c){var e=0>d-1?d+1:d-1;0===b&&a(c).find("td").eq(e).prepend('<span id="selection-marker-1">'+this.opts.invisibleSpace+"</span>"),a(c).find("td").eq(d).remove()},this)),this.selectionRestore(),this.sync()},tableAddHead:function(){var b=a(this.getParent()).closest("table");if(!this.isParentRedactor(b))return!1;if(0==b.size())return!1;if(this.bufferSet(),0!==b.find("thead").size())this.tableDeleteHead();else{var c=b.find("tr").first().clone();c.find("td").html(this.opts.invisibleSpace),$thead=a("<thead></thead>"),$thead.append(c),b.prepend($thead),this.sync()}},tableDeleteHead:function(){var b=a(this.getParent()).closest("table");if(!this.isParentRedactor(b))return!1;var c=b.find("thead");return 0==c.size()?!1:(this.bufferSet(),c.remove(),void this.sync())},tableAddRowAbove:function(){this.tableAddRow("before")},tableAddRowBelow:function(){this.tableAddRow("after")},tableAddColumnLeft:function(){this.tableAddColumn("before")},tableAddColumnRight:function(){this.tableAddColumn("after")},tableAddRow:function(b){var c=a(this.getParent()).closest("table");if(!this.isParentRedactor(c))return!1;if(0==c.size())return!1;this.bufferSet();var d=a(this.getParent()).closest("tr"),e=d.clone();e.find("td").html(this.opts.invisibleSpace),"after"===b?d.after(e):d.before(e),this.sync()},tableAddColumn:function(b){var c=a(this.getParent()).closest("table");if(!this.isParentRedactor(c))return!1;if(0==c.size())return!1;this.bufferSet();var d=0,e=a(this.getParent()).closest("tr"),f=a(this.getParent()).closest("td");e.find("td").each(a.proxy(function(b,c){a(c)[0]===f[0]&&(d=b)},this)),c.find("tr").each(a.proxy(function(c,e){var f=a(e).find("td").eq(d),g=f.clone();g.html(this.opts.invisibleSpace),"after"===b?f.after(g):f.before(g)},this)),this.sync()},videoShow:function(){this.selectionSave(),this.modalInit(this.opts.curLang.video,this.opts.modal_video,600,a.proxy(function(){a("#redactor_insert_video_btn").click(a.proxy(this.videoInsert,this)),setTimeout(function(){a("#redactor_insert_video_area").focus()},200)},this))},videoInsert:function(){var b=a("#redactor_insert_video_area").val();b=this.cleanStripTags(b),this.selectionRestore();var c=this.getBlock()||this.getCurrent();c?a(c).after(b):this.insertHtmlAdvanced(b,!1),this.sync(),this.modalClose()},linkShow:function(){this.selectionSave();var b=a.proxy(function(){this.insert_link_node=!1;var b=this.getSelection(),c="",d="",e="",f=this.getParent(),g=a(f).parent().get(0);g&&"A"===g.tagName&&(f=g),f&&"A"===f.tagName?(c=f.href,d=a(f).text(),e=f.target,this.insert_link_node=f):d=b.toString(),a(".redactor_link_text").val(d);var h=self.location.href.replace(/\/$/i,""),i=c.replace(h,"");if(this.opts.linkProtocol===!1){var j=new RegExp("^(http|ftp|https)://"+self.location.host,"i");i=i.replace(j,"")}var k=a("#redactor_tabs").find("a");this.opts.linkEmail===!1&&k.eq(1).remove(),this.opts.linkAnchor===!1&&k.eq(2).remove(),this.opts.linkEmail===!1&&this.opts.linkAnchor===!1?(a("#redactor_tabs").remove(),a("#redactor_link_url").val(i)):0===c.search("mailto:")?(this.modalSetTab.call(this,2),a("#redactor_tab_selected").val(2),a("#redactor_link_mailto").val(c.replace("mailto:",""))):0===i.search(/^#/gi)?(this.modalSetTab.call(this,3),a("#redactor_tab_selected").val(3),a("#redactor_link_anchor").val(i.replace(/^#/gi,""))):a("#redactor_link_url").val(i),"_blank"===e&&a("#redactor_link_blank").prop("checked",!0),a("#redactor_insert_link_btn").click(a.proxy(this.linkProcess,this)),setTimeout(function(){a("#redactor_link_url").focus()},200)},this);this.modalInit(this.opts.curLang.link,this.opts.modal_link,460,b)},linkProcess:function(){var b=a("#redactor_tab_selected").val(),c="",d="",e="",f="";if("1"===b){c=a("#redactor_link_url").val(),d=a("#redactor_link_url_text").val(),a("#redactor_link_blank").prop("checked")&&(e=' target="_blank"',f="_blank");var g="((xn--)?[a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}",h=new RegExp("^(http|ftp|https)://"+g,"i"),i=new RegExp("^"+g,"i");-1==c.search(h)&&0==c.search(i)&&this.opts.linkProtocol&&(c=this.opts.linkProtocol+c)}else"2"===b?(c="mailto:"+a("#redactor_link_mailto").val(),d=a("#redactor_link_mailto_text").val()):"3"===b&&(c="#"+a("#redactor_link_anchor").val(),d=a("#redactor_link_anchor_text").val());d=d.replace(/<|>/g,""),this.linkInsert('<a href="'+c+'"'+e+">"+d+"</a>",a.trim(d),c,f)},linkInsert:function(b,c,d,e){this.selectionRestore(),""!==c&&(this.insert_link_node?(this.bufferSet(),a(this.insert_link_node).text(c).attr("href",d),""!==e?a(this.insert_link_node).attr("target",e):a(this.insert_link_node).removeAttr("target"),this.sync()):this.exec("inserthtml",b)),setTimeout(a.proxy(function(){this.opts.observeLinks&&this.observeLinks()},this),5),this.modalClose()},fileShow:function(){this.selectionSave();var b=a.proxy(function(){var b=this.getSelection(),c="";c=this.oldIE()?b.text:b.toString(),a("#redactor_filename").val(c),this.isMobile()||this.draguploadInit("#redactor_file",{url:this.opts.fileUpload,uploadFields:this.opts.uploadFields,success:a.proxy(this.fileCallback,this),error:a.proxy(function(a,b){this.callback("fileUploadError",b)},this),uploadParam:this.opts.fileUploadParam}),this.uploadInit("redactor_file",{auto:!0,url:this.opts.fileUpload,success:a.proxy(this.fileCallback,this),error:a.proxy(function(a,b){this.callback("fileUploadError",b)},this)})},this);this.modalInit(this.opts.curLang.file,this.opts.modal_file,500,b)},fileCallback:function(b){if(this.selectionRestore(),b!==!1){var c=a("#redactor_filename").val();""===c&&(c=b.filename);var d='<a href="'+b.filelink+'" id="filelink-marker">'+c+"</a>";this.browser("webkit")&&this.window.chrome&&(d+="&nbsp;"),this.execCommand("inserthtml",d,!1);var e=a(this.$editor.find("a#filelink-marker"));0!=e.size()?e.removeAttr("id"):e=!1,this.sync(),this.callback("fileUpload",e,b)}this.modalClose()},imageShow:function(){this.selectionSave();var b=a.proxy(function(){if(this.opts.imageGetJson?a.getJSON(this.opts.imageGetJson,a.proxy(function(b){var c={},d=0;a.each(b,a.proxy(function(a,b){"undefined"!=typeof b.folder&&(d++,c[b.folder]=d)},this));var e=!1;if(a.each(b,a.proxy(function(b,d){var f="";"undefined"!=typeof d.title&&(f=d.title);var g=0;a.isEmptyObject(c)||"undefined"==typeof d.folder||(g=c[d.folder],e===!1&&(e=".redactorfolder"+g));var h=a('<img src="'+d.thumb+'" class="redactorfolder redactorfolder'+g+'" rel="'+d.image+'" title="'+f+'" />');a("#redactor_image_box").append(h),a(h).click(a.proxy(this.imageThumbClick,this))},this)),!a.isEmptyObject(c)){a(".redactorfolder").hide(),a(e).show();var f=function(b){a(".redactorfolder").hide(),a(".redactorfolder"+a(b.target).val()).show()},g=a('<select id="redactor_image_box_select">');a.each(c,function(b,c){g.append(a('<option value="'+c+'">'+b+"</option>"))}),a("#redactor_image_box").before(g),g.change(f)}},this)):a("#redactor_tabs").find("a").eq(1).remove(),this.opts.imageUpload||this.opts.s3)this.isMobile()||this.opts.s3!==!1||a("#redactor_file").length&&this.draguploadInit("#redactor_file",{url:this.opts.imageUpload,uploadFields:this.opts.uploadFields,success:a.proxy(this.imageCallback,this),error:a.proxy(function(a,b){this.callback("imageUploadError",b)},this),uploadParam:this.opts.imageUploadParam}),this.opts.s3===!1?this.uploadInit("redactor_file",{auto:!0,url:this.opts.imageUpload,success:a.proxy(this.imageCallback,this),error:a.proxy(function(a,b){this.callback("imageUploadError",b)},this)}):a("#redactor_file").on("change.redactor",a.proxy(this.s3handleFileSelect,this));else if(a(".redactor_tab").hide(),this.opts.imageGetJson){var b=a("#redactor_tabs").find("a");b.eq(0).remove(),b.eq(1).addClass("redactor_tabs_act"),a("#redactor_tab2").show()}else a("#redactor_tabs").remove(),a("#redactor_tab3").show();a("#redactor_upload_btn").click(a.proxy(this.imageCallbackLink,this)),this.opts.imageUpload||this.opts.imageGetJson||setTimeout(function(){a("#redactor_file_link").focus()},200)},this);this.modalInit(this.opts.curLang.image,this.opts.modal_image,610,b)},imageEdit:function(b){var c=b,d=c.parent().parent(),e=a.proxy(function(){a("#redactor_file_alt").val(c.attr("alt")),a("#redactor_image_edit_src").attr("href",c.attr("src")),a("#redactor_form_image_align").val(c.css("float")),"A"===a(d).get(0).tagName&&(a("#redactor_file_link").val(a(d).attr("href")),"_blank"==a(d).attr("target")&&a("#redactor_link_blank").prop("checked",!0)),a("#redactor_image_delete_btn").click(a.proxy(function(){this.imageRemove(c)},this)),a("#redactorSaveBtn").click(a.proxy(function(){this.imageSave(c)},this))},this);this.modalInit(this.opts.curLang.edit,this.opts.modal_image_edit,380,e)},imageRemove:function(b){var c=a(b).parent();a(b).remove(),c.length&&"P"===c[0].tagName&&(this.$editor.focus(),this.selectionStart(c)),this.callback("imageDelete",b),this.modalClose(),this.sync()},imageSave:function(b){var c=a(b),d=c.parent();c.attr("alt",a("#redactor_file_alt").val());var e=a("#redactor_form_image_align").val();if("left"===e)this.imageMargin="0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin+" 0",c.css({"float":"left",margin:this.imageMargin});else if("right"===e)this.imageMargin="0 0 "+this.opts.imageFloatMargin+" "+this.opts.imageFloatMargin,c.css({"float":"right",margin:this.imageMargin});else{this.imageMargin="0px";var f=c.closest("#redactor-image-box");0!=f.size()&&f.css({"float":"",margin:""}),c.css({"float":"",margin:""})}var g=a.trim(a("#redactor_file_link").val());if(""!==g){var h=!1;if(a("#redactor_link_blank").prop("checked")&&(h=!0),"A"!==d.get(0).tagName){var i=a('<a href="'+g+'">'+this.outerHtml(b)+"</a>");h&&i.attr("target","_blank"),c.replaceWith(i)}else d.attr("href",g),h?d.attr("target","_blank"):d.removeAttr("target")}else"A"===d.get(0).tagName&&d.replaceWith(this.outerHtml(b));this.modalClose(),this.observeImages(),this.sync()},imageResizeHide:function(b){if(b!==!1&&0!=a(b.target).parent().size()&&"redactor-image-box"===a(b.target).parent()[0].id)return!1;var c=this.$editor.find("#redactor-image-box");return 0==c.size()?!1:(this.$editor.find("#redactor-image-editter, #redactor-image-resizer").remove(),"0px"!=this.imageMargin&&(c.find("img").css("margin",this.imageMargin),c.css("margin",""),this.imageMargin="0px"),c.find("img").css("opacity",""),c.replaceWith(function(){return a(this).contents()}),a(document).off("click.redactor-image-resize-hide"),this.$editor.off("click.redactor-image-resize-hide"),this.$editor.off("keydown.redactor-image-delete"),void this.sync())},imageResize:function(b){var c=a(b);c.on("mousedown",a.proxy(function(){this.imageResizeHide(!1)},this)),c.on("dragstart",a.proxy(function(){this.$editor.on("drop.redactor-image-inside-drop",a.proxy(function(){setTimeout(a.proxy(function(){this.observeImages(),this.$editor.off("drop.redactor-image-inside-drop"),this.sync()},this),1)},this))},this)),c.on("click",a.proxy(function(){if(0!=this.$editor.find("#redactor-image-box").size())return!1;var b,d,e=c.width()/c.height(),f=20,g=this.imageResizeControls(c),h=!1;g.on("mousedown",function(a){h=!0,a.preventDefault(),e=c.width()/c.height(),b=Math.round(a.pageX-c.eq(0).offset().left),d=Math.round(a.pageY-c.eq(0).offset().top)}),a(this.document.body).on("mousemove",a.proxy(function(a){if(h){var g=(Math.round(a.pageX-c.eq(0).offset().left)-b,Math.round(a.pageY-c.eq(0).offset().top)-d),i=c.height(),j=parseInt(i,10)+g,k=Math.round(j*e);k>f&&(c.width(k),this.imageEditter.css(100>k?{marginTop:"-7px",marginLeft:"-13px",fontSize:"9px",padding:"3px 5px"}:{marginTop:"-11px",marginLeft:"-18px",fontSize:"11px",padding:"7px 10px"})),b=Math.round(a.pageX-c.eq(0).offset().left),d=Math.round(a.pageY-c.eq(0).offset().top),this.sync()}},this)).on("mouseup",function(){h=!1}),this.$editor.on("keydown.redactor-image-delete",a.proxy(function(a){var b=a.which;(this.keyCode.BACKSPACE==b||this.keyCode.DELETE==b)&&(this.bufferSet(),this.imageResizeHide(!1),this.imageRemove(c))
},this)),a(document).on("click.redactor-image-resize-hide",a.proxy(this.imageResizeHide,this)),this.$editor.on("click.redactor-image-resize-hide",a.proxy(this.imageResizeHide,this))},this))},imageResizeControls:function(b){var c=a('<span id="redactor-image-box" data-redactor="verified">');c.css({position:"relative",display:"inline-block",lineHeight:0,outline:"1px dashed rgba(0, 0, 0, .6)","float":b.css("float")}),c.attr("contenteditable",!1),this.imageMargin=b[0].style.margin,"0px"!=this.imageMargin&&(c.css("margin",this.imageMargin),b.css("margin","")),b.css("opacity",.5).after(c),this.imageEditter=a('<span id="redactor-image-editter" data-redactor="verified">'+this.opts.curLang.edit+"</span>"),this.imageEditter.css({position:"absolute",zIndex:2,top:"50%",left:"50%",marginTop:"-11px",marginLeft:"-18px",lineHeight:1,backgroundColor:"#000",color:"#fff",fontSize:"11px",padding:"7px 10px",cursor:"pointer"}),this.imageEditter.attr("contenteditable",!1),this.imageEditter.on("click",a.proxy(function(){this.imageEdit(b)},this)),c.append(this.imageEditter);var d=a('<span id="redactor-image-resizer" data-redactor="verified"></span>');return d.css({position:"absolute",zIndex:2,lineHeight:1,cursor:"nw-resize",bottom:"-4px",right:"-5px",border:"1px solid #fff",backgroundColor:"#000",width:"8px",height:"8px"}),d.attr("contenteditable",!1),c.append(d),c.append(b),d},imageThumbClick:function(b){var c='<img id="image-marker" src="'+a(b.target).attr("rel")+'" alt="'+a(b.target).attr("title")+'" />',d=this.getParent();this.opts.paragraphy&&0==a(d).closest("li").size()&&(c="<p>"+c+"</p>"),this.imageInsert(c,!0)},imageCallbackLink:function(){var b=a("#redactor_file_link").val();if(""!==b){var c='<img id="image-marker" src="'+b+'" />';this.opts.linebreaks===!1&&(c="<p>"+c+"</p>"),this.imageInsert(c,!0)}else this.modalClose()},imageCallback:function(a){this.imageInsert(a)},imageInsert:function(b,c){if(this.selectionRestore(),b!==!1){var d="";if(c!==!0){d='<img id="image-marker" src="'+b.filelink+'" />';var e=this.getParent();this.opts.paragraphy&&0==a(e).closest("li").size()&&(d="<p>"+d+"</p>")}else d=b;this.execCommand("inserthtml",d,!1);var f=a(this.$editor.find("img#image-marker"));f.length?f.removeAttr("id"):f=!1,this.sync(),c!==!0&&this.callback("imageUpload",f,b)}this.modalClose(),this.observeImages()},modalTemplatesInit:function(){a.extend(this.opts,{modal_file:String()+'<section><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorUploadFileForm" method="post" action="" enctype="multipart/form-data"><label>'+this.opts.curLang.filename+'</label><input type="text" id="redactor_filename" class="redactor_input" /><div style="margin-top: 7px;"><input type="file" id="redactor_file" name="'+this.opts.fileUploadParam+'" /></div></form></section>',modal_image_edit:String()+"<section><label>"+this.opts.curLang.title+'</label><input id="redactor_file_alt" class="redactor_input" /><label>'+this.opts.curLang.link+'</label><input id="redactor_file_link" class="redactor_input" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+"</label><label>"+this.opts.curLang.image_position+'</label><select id="redactor_form_image_align"><option value="none">'+this.opts.curLang.none+'</option><option value="left">'+this.opts.curLang.left+'</option><option value="right">'+this.opts.curLang.right+'</option></select></section><footer><button id="redactor_image_delete_btn" class="redactor_modal_btn redactor_modal_delete_btn">'+this.opts.curLang._delete+'</button>&nbsp;&nbsp;&nbsp;<button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="save" class="redactor_modal_btn redactor_modal_action_btn" id="redactorSaveBtn" value="'+this.opts.curLang.save+'" /></footer>',modal_image:String()+'<section><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">'+this.opts.curLang.upload+'</a><a href="#">'+this.opts.curLang.choose+'</a><a href="#">'+this.opts.curLang.link+'</a></div><div id="redactor-progress" class="redactor-progress redactor-progress-striped" style="display: none;"><div id="redactor-progress-bar" class="redactor-progress-bar" style="width: 100%;"></div></div><form id="redactorInsertImageForm" method="post" action="" enctype="multipart/form-data"><div id="redactor_tab1" class="redactor_tab"><input type="file" id="redactor_file" name="'+this.opts.imageUploadParam+'" /></div><div id="redactor_tab2" class="redactor_tab" style="display: none;"><div id="redactor_image_box"></div></div></form><div id="redactor_tab3" class="redactor_tab" style="display: none;"><label>'+this.opts.curLang.image_web_link+'</label><input type="text" name="redactor_file_link" id="redactor_file_link" class="redactor_input"  /></div></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_upload_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_link:String()+'<section><form id="redactorInsertLinkForm" method="post" action=""><div id="redactor_tabs"><a href="#" class="redactor_tabs_act">URL</a><a href="#">Email</a><a href="#">'+this.opts.curLang.anchor+'</a></div><input type="hidden" id="redactor_tab_selected" value="1" /><div class="redactor_tab" id="redactor_tab1"><label>URL</label><input type="text" id="redactor_link_url" class="redactor_input"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_url_text" /><label><input type="checkbox" id="redactor_link_blank"> '+this.opts.curLang.link_new_tab+'</label></div><div class="redactor_tab" id="redactor_tab2" style="display: none;"><label>Email</label><input type="text" id="redactor_link_mailto" class="redactor_input" /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_mailto_text" /></div><div class="redactor_tab" id="redactor_tab3" style="display: none;"><label>'+this.opts.curLang.anchor+'</label><input type="text" class="redactor_input" id="redactor_link_anchor"  /><label>'+this.opts.curLang.text+'</label><input type="text" class="redactor_input redactor_link_text" id="redactor_link_anchor_text" /></div></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_link_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_table:String()+"<section><label>"+this.opts.curLang.rows+'</label><input type="text" size="5" value="2" id="redactor_table_rows" /><label>'+this.opts.curLang.columns+'</label><input type="text" size="5" value="3" id="redactor_table_columns" /></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" name="upload" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_table_btn" value="'+this.opts.curLang.insert+'" /></footer>',modal_video:String()+'<section><form id="redactorInsertVideoForm"><label>'+this.opts.curLang.video_html_code+'</label><textarea id="redactor_insert_video_area" style="width: 99%; height: 160px;"></textarea></form></section><footer><button class="redactor_modal_btn redactor_btn_modal_close">'+this.opts.curLang.cancel+'</button><input type="button" class="redactor_modal_btn redactor_modal_action_btn" id="redactor_insert_video_btn" value="'+this.opts.curLang.insert+'" /></footer>'})},modalInit:function(b,c,d,e){var f=a("#redactor_modal_overlay");f.length||(this.$overlay=f=a('<div id="redactor_modal_overlay" style="display: none;"></div>'),a("body").prepend(this.$overlay)),this.opts.modalOverlay&&f.show().on("click",a.proxy(this.modalClose,this));var g=a("#redactor_modal");g.length||(this.$modal=g=a('<div id="redactor_modal" style="display: none;"><div id="redactor_modal_close">&times;</div><header id="redactor_modal_header"></header><div id="redactor_modal_inner"></div></div>'),a("body").append(this.$modal)),a("#redactor_modal_close").on("click",a.proxy(this.modalClose,this)),this.hdlModalClose=a.proxy(function(a){return a.keyCode===this.keyCode.ESC?(this.modalClose(),!1):void 0},this),a(document).keyup(this.hdlModalClose),this.$editor.keyup(this.hdlModalClose),this.modalcontent=!1,0==c.indexOf("#")?(this.modalcontent=a(c),a("#redactor_modal_inner").empty().append(this.modalcontent.html()),this.modalcontent.html("")):a("#redactor_modal_inner").empty().append(c),g.find("#redactor_modal_header").html(b),"undefined"!=typeof a.fn.draggable&&(g.draggable({handle:"#redactor_modal_header"}),g.find("#redactor_modal_header").css("cursor","move"));var h=a("#redactor_tabs");if(h.length){var i=this;h.find("a").each(function(b,c){b++,a(c).on("click",function(c){if(c.preventDefault(),h.find("a").removeClass("redactor_tabs_act"),a(this).addClass("redactor_tabs_act"),a(".redactor_tab").hide(),a("#redactor_tab"+b).show(),a("#redactor_tab_selected").val(b),i.isMobile()===!1){var d=g.outerHeight();g.css("margin-top","-"+(d+10)/2+"px")}})})}g.find(".redactor_btn_modal_close").on("click",a.proxy(this.modalClose,this)),this.saveModalScroll=this.opts.autoresize===!0?this.document.body.scrollTop:this.$editor.scrollTop(),this.isMobile()===!1?(g.css({position:"fixed",top:"-2000px",left:"50%",width:d+"px",marginLeft:"-"+(d+60)/2+"px"}).show(),this.modalSaveBodyOveflow=a(document.body).css("overflow"),a(document.body).css("overflow","hidden")):g.css({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",margin:"0",minHeight:"300px"}).show(),"function"==typeof e&&e(),this.isMobile()===!1&&setTimeout(function(){var a=g.outerHeight();g.css({top:"50%",height:"auto",minHeight:"auto",marginTop:"-"+(a+10)/2+"px"})},10)},modalClose:function(){return a("#redactor_modal_close").off("click",this.modalClose),a("#redactor_modal").fadeOut("fast",a.proxy(function(){var b=a("#redactor_modal_inner");this.modalcontent!==!1&&(this.modalcontent.html(b.html()),this.modalcontent=!1),b.html(""),this.opts.modalOverlay&&a("#redactor_modal_overlay").hide().off("click",this.modalClose),a(document).unbind("keyup",this.hdlModalClose),this.$editor.unbind("keyup",this.hdlModalClose),this.selectionRestore(),this.opts.autoresize&&this.saveModalScroll?a(this.document.body).scrollTop(this.saveModalScroll):this.opts.autoresize===!1&&this.saveModalScroll&&this.$editor.scrollTop(this.saveModalScroll)},this)),this.isMobile()===!1&&a(document.body).css("overflow",this.modalSaveBodyOveflow?this.modalSaveBodyOveflow:"visible"),!1},modalSetTab:function(b){a(".redactor_tab").hide(),a("#redactor_tabs").find("a").removeClass("redactor_tabs_act").eq(b-1).addClass("redactor_tabs_act"),a("#redactor_tab"+b).show()},s3handleFileSelect:function(a){for(var b,c=a.target.files,d=0;b=c[d];d++)this.s3uploadFile(b)},s3uploadFile:function(b){this.s3executeOnSignedUrl(b,a.proxy(function(a){this.s3uploadToS3(b,a)},this))},s3executeOnSignedUrl:function(b,c){var d=new XMLHttpRequest,e="?";"-1"!=this.opts.s3.search(/\?/)&&(e="&"),d.open("GET",this.opts.s3+e+"name="+b.name+"&type="+b.type,!0),d.overrideMimeType("text/plain; charset=x-user-defined"),d.onreadystatechange=function(){4==this.readyState&&200==this.status?(a("#redactor-progress").fadeIn(),c(decodeURIComponent(this.responseText))):4==this.readyState&&200!=this.status},d.send()},s3createCORSRequest:function(a,b){var c=new XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c},s3uploadToS3:function(b,c){var d=this.s3createCORSRequest("PUT",c);d&&(d.onload=a.proxy(function(){if(200==d.status){a("#redactor-progress, #redactor-progress-drag").hide();var b=c.split("?");if(!b[0])return!1;this.selectionRestore();var e="";e='<img id="image-marker" src="'+b[0]+'" />',this.opts.paragraphy&&(e="<p>"+e+"</p>"),this.execCommand("inserthtml",e,!1);var f=a(this.$editor.find("img#image-marker"));f.length?f.removeAttr("id"):f=!1,this.sync(),this.callback("imageUpload",f,!1),this.modalClose(),this.observeImages()}},this),d.onerror=function(){},d.upload.onprogress=function(){},d.setRequestHeader("Content-Type",b.type),d.setRequestHeader("x-amz-acl","public-read"),d.send(b))},uploadInit:function(b,c){this.uploadOptions={url:!1,success:!1,error:!1,start:!1,trigger:!1,auto:!1,input:!1},a.extend(this.uploadOptions,c);var d=a("#"+b);d.length&&"INPUT"===d[0].tagName?(this.uploadOptions.input=d,this.el=a(d[0].form)):this.el=d,this.element_action=this.el.attr("action"),this.uploadOptions.auto?a(this.uploadOptions.input).change(a.proxy(function(a){this.el.submit(function(){return!1}),this.uploadSubmit(a)},this)):this.uploadOptions.trigger&&a("#"+this.uploadOptions.trigger).click(a.proxy(this.uploadSubmit,this))},uploadSubmit:function(){a("#redactor-progress").fadeIn(),this.uploadForm(this.element,this.uploadFrame())},uploadFrame:function(){this.id="f"+Math.floor(99999*Math.random());var b=this.document.createElement("div"),c='<iframe style="display:none" id="'+this.id+'" name="'+this.id+'"></iframe>';return b.innerHTML=c,a(b).appendTo("body"),this.uploadOptions.start&&this.uploadOptions.start(),a("#"+this.id).load(a.proxy(this.uploadLoaded,this)),this.id},uploadForm:function(b,c){if(this.uploadOptions.input){var d="redactorUploadForm"+this.id,e="redactorUploadFile"+this.id;this.form=a('<form  action="'+this.uploadOptions.url+'" method="POST" target="'+c+'" name="'+d+'" id="'+d+'" enctype="multipart/form-data" />'),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){null!=c&&0===c.toString().indexOf("#")&&(c=a(c).val());var d=a("<input/>",{type:"hidden",name:b,value:c});a(this.form).append(d)},this));var f=this.uploadOptions.input,g=a(f).clone();a(f).attr("id",e).before(g).appendTo(this.form),a(this.form).css("position","absolute").css("top","-2000px").css("left","-2000px").appendTo("body"),this.form.submit()}else b.attr("target",c).attr("method","POST").attr("enctype","multipart/form-data").attr("action",this.uploadOptions.url),this.element.submit()},uploadLoaded:function(){var b,c=a("#"+this.id)[0];if(b=c.contentDocument?c.contentDocument:c.contentWindow?c.contentWindow.document:window.frames[this.id].document,this.uploadOptions.success)if(a("#redactor-progress").hide(),"undefined"!=typeof b){var d=b.body.innerHTML,e=d.match(/\{(.|\n)*\}/)[0];e=e.replace(/^\[/,""),e=e.replace(/\]$/,"");var f=a.parseJSON(e);"undefined"==typeof f.error?this.uploadOptions.success(f):(this.uploadOptions.error(this,f),this.modalClose())}else this.modalClose(),alert("Upload failed!");this.el.attr("action",this.element_action),this.el.attr("target","")},draguploadInit:function(b,c){return this.draguploadOptions=a.extend({url:!1,success:!1,error:!1,preview:!1,uploadFields:!1,text:this.opts.curLang.drop_file_here,atext:this.opts.curLang.or_choose,uploadParam:!1},c),void 0===window.FormData?!1:(this.droparea=a('<div class="redactor_droparea"></div>'),this.dropareabox=a('<div class="redactor_dropareabox">'+this.draguploadOptions.text+"</div>"),this.dropalternative=a('<div class="redactor_dropalternative">'+this.draguploadOptions.atext+"</div>"),this.droparea.append(this.dropareabox),a(b).before(this.droparea),a(b).before(this.dropalternative),this.dropareabox.on("dragover",a.proxy(function(){return this.draguploadOndrag()},this)),this.dropareabox.on("dragleave",a.proxy(function(){return this.draguploadOndragleave()},this)),void(this.dropareabox.get(0).ondrop=a.proxy(function(a){a.preventDefault(),this.dropareabox.removeClass("hover").addClass("drop"),this.dragUploadAjax(this.draguploadOptions.url,a.dataTransfer.files[0],!1,!1,!1,this.draguploadOptions.uploadParam)},this)))},dragUploadAjax:function(b,c,d,e,f,g){if(!d){var h=a.ajaxSettings.xhr();h.upload&&h.upload.addEventListener("progress",a.proxy(this.uploadProgress,this),!1),a.ajaxSetup({xhr:function(){return h}})}var i=new FormData;g!==!1?i.append(g,c):i.append("file",c),this.opts.uploadFields!==!1&&"object"==typeof this.opts.uploadFields&&a.each(this.opts.uploadFields,a.proxy(function(b,c){null!=c&&0===c.toString().indexOf("#")&&(c=a(c).val()),i.append(b,c)},this)),a.ajax({url:b,dataType:"html",data:i,cache:!1,contentType:!1,processData:!1,type:"POST",success:a.proxy(function(b){b=b.replace(/^\[/,""),b=b.replace(/\]$/,"");var c="string"==typeof b?a.parseJSON(b):b;if(d){e.fadeOut("slow",function(){a(this).remove()});var g=a("<img>");g.attr("src",c.filelink).attr("id","drag-image-marker"),this.insertNodeToCaretPositionFromPoint(f,g[0]);var h=a(this.$editor.find("img#drag-image-marker"));h.length?h.removeAttr("id"):h=!1,this.sync(),this.observeImages(),h&&this.callback("imageUpload",h,c),"undefined"!=typeof c.error&&this.callback("imageUploadError",c)}else"undefined"==typeof c.error?this.draguploadOptions.success(c):(this.draguploadOptions.error(this,c),this.draguploadOptions.success(!1))},this)})},draguploadOndrag:function(){return this.dropareabox.addClass("hover"),!1},draguploadOndragleave:function(){return this.dropareabox.removeClass("hover"),!1},uploadProgress:function(a,b){var c=a.loaded?parseInt(a.loaded/a.total*100,10):a;this.dropareabox.text("Loading "+c+"% "+(b||""))},isMobile:function(){return/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},normalize:function(a){return"undefined"==typeof a?0:parseInt(a.replace("px",""),10)},outerHtml:function(b){return a("<div>").append(a(b).eq(0).clone()).html()},isString:function(a){return"[object String]"==Object.prototype.toString.call(a)},isEmpty:function(a){return a=a.replace(/&#x200b;|<br>|<br\/>|&nbsp;/gi,""),a=a.replace(/\s/g,""),a=a.replace(/^<p>[^\W\w\D\d]*?<\/p>$/i,""),""==a},browser:function(a){var b=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||b.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[];return"version"==a?c[2]:"webkit"==a?"chrome"==c[1]||"webkit"==c[1]:c[1]==a},oldIE:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},getFragmentHtml:function(a){var b=a.cloneNode(!0),c=this.document.createElement("div");return c.appendChild(b),c.innerHTML},extractContent:function(){for(var a,b=this.$editor[0],c=this.document.createDocumentFragment();a=b.firstChild;)c.appendChild(a);return c},isParentRedactor:function(b){return b?this.opts.iframe?b:0==a(b).parents("div.redactor_editor").length||a(b).hasClass("redactor_editor")?!1:b:!1},currentOrParentIs:function(a){var b=this.getParent(),c=this.getCurrent();return b&&b.tagName===a?b:c&&c.tagName===a?c:!1},isEndOfElement:function(){var b=this.getBlock(),c=this.getCaretOffset(b),d=a.trim(a(b).text()).replace(/\n\r\n/g,""),e=d.length;return c==e?!0:!1},isFocused:function(){var b,c=this.getSelection();return c&&c.rangeCount&&c.rangeCount>0&&(b=c.getRangeAt(0).startContainer),b?this.opts.iframe?this.getCaretOffsetRange().equals()?!this.$editor.is(b):!0:0!=a(b).closest("div.redactor_editor").length:!1},removeEmptyAttr:function(b,c){""==a(b).attr(c)&&a(b).removeAttr(c)},removeFromArrayByValue:function(a,b){for(var c=null;-1!==(c=a.indexOf(b));)a.splice(c,1);return a}},b.prototype.init.prototype=b.prototype,a.Redactor.fn.formatLinkify=function(b,c,d,e,f){for(var g=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,h=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,i=/(https?:\/\/.*\.(?:png|jpg|jpeg|gif))/gi,j=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,k=/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,l=(this.$editor?this.$editor.get(0):this).childNodes,m=l.length;m--;){var n=l[m];if(3===n.nodeType){var o=n.nodeValue;if(e&&o){var p='<iframe width="500" height="281" src="',q='" frameborder="0" allowfullscreen></iframe>';o.match(j)?(o=o.replace(j,p+"//www.youtube.com/embed/$1"+q),a(n).after(o).remove()):o.match(k)&&(o=o.replace(k,p+"//player.vimeo.com/video/$2"+q),a(n).after(o).remove())}if(d&&o&&o.match(i)&&(o=o.replace(i,'<img src="$1">'),a(n).after(o).remove()),c&&o&&(o.match(g)||o.match(h))){var r=o.match(g)||o.match(h);r=r[0],r.length>f&&(r=r.substring(0,f)+"..."),o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(g,'$1<a href="'+b+'$2">'+a.trim(r)+"</a>$3").replace(h,'$1<a href="$2">'+a.trim(r)+"</a>$5"),a(n).after(o).remove()}}else 1!==n.nodeType||/^(a|button|textarea)$/i.test(n.tagName)||a.Redactor.fn.formatLinkify.call(n,b,c,d,e,f)}}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b});var ua={toString:function(){return navigator.userAgent},test:function(a){return this.toString().toLowerCase().indexOf(a.toLowerCase())>-1}};ua.version=(ua.toString().toLowerCase().match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],ua.webkit=ua.test("webkit"),ua.gecko=ua.test("gecko")&&!ua.webkit,ua.opera=ua.test("opera"),ua.ie=ua.test("msie")&&!ua.opera,ua.ie6=ua.ie&&document.compatMode&&"undefined"==typeof document.documentElement.style.maxHeight,ua.ie7=ua.ie&&document.documentElement&&"undefined"!=typeof document.documentElement.style.maxHeight&&"undefined"==typeof XDomainRequest,ua.ie8=ua.ie&&"undefined"!=typeof XDomainRequest;var domReady=function(){var a=[],b=function(){if(!arguments.callee.done){arguments.callee.done=!0;for(var b=0;b<a.length;b++)a[b]()}};return document.addEventListener&&document.addEventListener("DOMContentLoaded",b,!1),ua.ie&&(!function(){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,50)}b()}(),document.onreadystatechange=function(){"complete"===document.readyState&&(document.onreadystatechange=null,b())}),ua.webkit&&document.readyState&&!function(){"loading"!==document.readyState?b():setTimeout(arguments.callee,10)}(),window.onload=b,function(b){return"function"==typeof b&&(a[a.length]=b),b}}(),cssHelper=function(){var a,b={BLOCKS:/[^\s{;][^{;]*\{(?:[^{}]*\{[^{}]*\}[^{}]*|[^{}]*)*\}/g,BLOCKS_INSIDE:/[^\s{][^{]*\{[^{}]*\}/g,DECLARATIONS:/[a-zA-Z\-]+[^;]*:[^;]+;/g,RELATIVE_URLS:/url\(['"]?([^\/\)'"][^:\)'"]+)['"]?\)/g,REDUNDANT_COMPONENTS:/(?:\/\*([^*\\\\]|\*(?!\/))+\*\/|@import[^;]+;)/g,REDUNDANT_WHITESPACE:/\s*(,|:|;|\{|\})\s*/g,WHITESPACE_IN_PARENTHESES:/\(\s*(\S*)\s*\)/g,MORE_WHITESPACE:/\s{2,}/g,FINAL_SEMICOLONS:/;\}/g,NOT_WHITESPACE:/\S+/g},c=!1,d=[],e=function(a){"function"==typeof a&&(d[d.length]=a)},f=function(){for(var b=0;b<d.length;b++)d[b](a)},g={},h=function(a,b){if(g[a]){var c=g[a].listeners;if(c)for(var d=0;d<c.length;d++)c[d](b)}},j=function(a,b,c){if(ua.ie&&!window.XMLHttpRequest&&(window.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),!XMLHttpRequest)return"";var d=new XMLHttpRequest;try{d.open("get",a,!0),d.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest")}catch(e){return void c()}var f=!1;setTimeout(function(){f=!0},5e3),document.documentElement.style.cursor="progress",d.onreadystatechange=function(){4!==d.readyState||f||(!d.status&&"file:"===location.protocol||d.status>=200&&d.status<300||304===d.status||navigator.userAgent.indexOf("Safari")>-1&&"undefined"==typeof d.status?b(d.responseText):c(),document.documentElement.style.cursor="",d=null)},d.send("")},k=function(a){return a=a.replace(b.REDUNDANT_COMPONENTS,""),a=a.replace(b.REDUNDANT_WHITESPACE,"$1"),a=a.replace(b.WHITESPACE_IN_PARENTHESES,"($1)"),a=a.replace(b.MORE_WHITESPACE," "),a=a.replace(b.FINAL_SEMICOLONS,"}")},l={stylesheet:function(a){var c={},d=[],e=[],f=[],g=[],h=a.cssHelperText,i=a.getAttribute("media");if(i)var j=i.toLowerCase().split(",");else var j=["all"];for(var k=0;k<j.length;k++)d[d.length]=l.mediaQuery(j[k],c);var m=h.match(b.BLOCKS);if(null!==m)for(var k=0;k<m.length;k++)if("@media "===m[k].substring(0,7)){var n=l.mediaQueryList(m[k],c);f=f.concat(n.getRules()),e[e.length]=n}else f[f.length]=g[g.length]=l.rule(m[k],c,null);return c.element=a,c.getCssText=function(){return h},c.getAttrMediaQueries=function(){return d},c.getMediaQueryLists=function(){return e},c.getRules=function(){return f},c.getRulesWithoutMQ=function(){return g},c},mediaQueryList:function(a,c){var d={},e=a.indexOf("{"),f=a.substring(0,e);a=a.substring(e+1,a.length-1);for(var g=[],h=[],i=f.toLowerCase().substring(7).split(","),j=0;j<i.length;j++)g[g.length]=l.mediaQuery(i[j],d);var k=a.match(b.BLOCKS_INSIDE);if(null!==k)for(j=0;j<k.length;j++)h[h.length]=l.rule(k[j],c,d);return d.type="mediaQueryList",d.getMediaQueries=function(){return g},d.getRules=function(){return h},d.getListText=function(){return f},d.getCssText=function(){return a},d},mediaQuery:function(a,c){a=a||"";var d,e;"mediaQueryList"===c.type?d=c:e=c;for(var f,g=!1,h=[],i=!0,j=a.match(b.NOT_WHITESPACE),k=0;k<j.length;k++){var l=j[k];if(f||"not"!==l&&"only"!==l)if(f){if("("===l.charAt(0)){var m=l.substring(1,l.length-1).split(":");h[h.length]={mediaFeature:m[0],value:m[1]||null}}}else f=l;else"not"===l&&(g=!0)}return{getQueryText:function(){return a},getAttrStyleSheet:function(){return e||null},getList:function(){return d||null},getValid:function(){return i},getNot:function(){return g},getMediaType:function(){return f},getExpressions:function(){return h}}},rule:function(a,b,c){for(var d={},e=a.indexOf("{"),f=a.substring(0,e),g=f.split(","),h=[],i=a.substring(e+1,a.length-1).split(";"),j=0;j<i.length;j++)h[h.length]=l.declaration(i[j],d);return d.getStylesheet=function(){return b||null},d.getMediaQueryList=function(){return c||null},d.getSelectors=function(){return g},d.getSelectorText=function(){return f},d.getDeclarations=function(){return h},d.getPropertyValue=function(a){for(var b=0;b<h.length;b++)if(h[b].getProperty()===a)return h[b].getValue();return null},d},declaration:function(a,b){var c=a.indexOf(":"),d=a.substring(0,c),e=a.substring(c+1);return{getRule:function(){return b||null},getProperty:function(){return d},getValue:function(){return e}}}},m=function(b){if("string"==typeof b.cssHelperText){var c={stylesheet:null,mediaQueryLists:[],rules:[],selectors:{},declarations:[],properties:{}},d=c.stylesheet=l.stylesheet(b),e=(c.mediaQueryLists=d.getMediaQueryLists(),c.rules=d.getRules()),f=c.selectors,g=function(a){for(var b=a.getSelectors(),c=0;c<b.length;c++){var d=b[c];f[d]||(f[d]=[]),f[d][f[d].length]=a}};for(i=0;i<e.length;i++)g(e[i]);var h=c.declarations;for(i=0;i<e.length;i++)h=c.declarations=h.concat(e[i].getDeclarations());var j=c.properties;for(i=0;i<h.length;i++){var k=h[i].getProperty();j[k]||(j[k]=[]),j[k][j[k].length]=h[i]}return b.cssHelperParsed=c,a[a.length]=b,c}},n=function(a,b){},o=function(){c=!0,a=[];for(var d=[],e=function(){for(var a=0;a<d.length;a++)m(d[a]);var b=document.getElementsByTagName("style");for(a=0;a<b.length;a++)n(b[a]);c=!1,f()},g=document.getElementsByTagName("link"),h=0;h<g.length;h++){var i=g[h];i.getAttribute("rel").indexOf("style")>-1&&i.href&&0!==i.href.length&&!i.disabled&&(d[d.length]=i)}if(d.length>0){var l=0,o=function(){l++,l===d.length&&e()},p=function(a){var c=a.href;j(c,function(d){d=k(d).replace(b.RELATIVE_URLS,"url("+c.substring(0,c.lastIndexOf("/"))+"/$1)"),a.cssHelperText=d,o()},o)};for(h=0;h<d.length;h++)p(d[h])}else e()},p={stylesheets:"array",mediaQueryLists:"array",rules:"array",selectors:"object",declarations:"array",properties:"object"},q={stylesheets:null,mediaQueryLists:null,rules:null,selectors:null,declarations:null,properties:null},r=function(a,b){if(null!==q[a]){if("array"===p[a])return q[a]=q[a].concat(b);var c=q[a];for(var d in b)b.hasOwnProperty(d)&&(c[d]=c[d]?c[d].concat(b[d]):b[d]);return c}},s=function(b){q[b]="array"===p[b]?[]:{};for(var c=0;c<a.length;c++){var d="stylesheets"===b?"stylesheet":b;r(b,a[c].cssHelperParsed[d])}return q[b]},t=function(a){return"undefined"!=typeof window.innerWidth?window["inner"+a]:"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?document.documentElement["client"+a]:void 0};return{addStyle:function(a,b,c){var d=document.createElement("style");return d.setAttribute("type","text/css"),b&&b.length>0&&d.setAttribute("media",b.join(",")),document.getElementsByTagName("head")[0].appendChild(d),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)),d.addedWithCssHelper=!0,"undefined"==typeof c||c===!0?cssHelper.parsed(function(){var b=n(d,a);for(var c in b)b.hasOwnProperty(c)&&r(c,b[c]);h("newStyleParsed",d)}):d.parsingDisallowed=!0,d},removeStyle:function(a){return a.parentNode.removeChild(a)},parsed:function(b){c?e(b):"undefined"!=typeof a?"function"==typeof b&&b(a):(e(b),o())},stylesheets:function(a){cssHelper.parsed(function(){a(q.stylesheets||s("stylesheets"))})},mediaQueryLists:function(a){cssHelper.parsed(function(){a(q.mediaQueryLists||s("mediaQueryLists"))})},rules:function(a){cssHelper.parsed(function(){a(q.rules||s("rules"))})},selectors:function(a){cssHelper.parsed(function(){a(q.selectors||s("selectors"))})},declarations:function(a){cssHelper.parsed(function(){a(q.declarations||s("declarations"))})},properties:function(a){cssHelper.parsed(function(){a(q.properties||s("properties"))})},broadcast:h,addListener:function(a,b){"function"==typeof b&&(g[a]||(g[a]={listeners:[]}),g[a].listeners[g[a].listeners.length]=b)},removeListener:function(a,b){if("function"==typeof b&&g[a])for(var c=g[a].listeners,d=0;d<c.length;d++)c[d]===b&&(c.splice(d,1),d-=1)},getViewportWidth:function(){return t("Width")},getViewportHeight:function(){return t("Height")}}}();domReady(function(){var a,b={LENGTH_UNIT:/[0-9]+(em|ex|px|in|cm|mm|pt|pc)$/,RESOLUTION_UNIT:/[0-9]+(dpi|dpcm)$/,ASPECT_RATIO:/^[0-9]+\/[0-9]+$/,ABSOLUTE_VALUE:/^[0-9]*(\.[0-9]+)*$/},c=[],d=function(){var a="css3-mediaqueries-test",b=document.createElement("div");b.id=a;var c=cssHelper.addStyle("@media all and (width) { #"+a+" { width: 1px !important; } }",[],!1);document.body.appendChild(b);var e=1===b.offsetWidth;return c.parentNode.removeChild(c),b.parentNode.removeChild(b),d=function(){return e},e},e=function(){a=document.createElement("div"),a.style.cssText="position:absolute;top:-9999em;left:-9999em;margin:0;border:none;padding:0;width:1em;font-size:1em;",document.body.appendChild(a),16!==a.offsetWidth&&(a.style.fontSize=16/a.offsetWidth+"em"),a.style.width=""},f=function(b){a.style.width=b;var c=a.offsetWidth;return a.style.width="",c},g=function(a,c){var d=a.length,e="min-"===a.substring(0,4),g=!e&&"max-"===a.substring(0,4);if(null!==c){var h,i;if(b.LENGTH_UNIT.exec(c))h="length",i=f(c);else if(b.RESOLUTION_UNIT.exec(c)){h="resolution",i=parseInt(c,10);var j=c.substring((i+"").length)}else b.ASPECT_RATIO.exec(c)?(h="aspect-ratio",i=c.split("/")):b.ABSOLUTE_VALUE?(h="absolute",i=c):h="unknown"}var k,l;if("device-width"===a.substring(d-12,d))return k=screen.width,null!==c?"length"===h?e&&k>=i||g&&i>k||!e&&!g&&k===i:!1:k>0;if("device-height"===a.substring(d-13,d))return l=screen.height,null!==c?"length"===h?e&&l>=i||g&&i>l||!e&&!g&&l===i:!1:l>0;if("width"===a.substring(d-5,d))return k=document.documentElement.clientWidth||document.body.clientWidth,null!==c?"length"===h?e&&k>=i||g&&i>k||!e&&!g&&k===i:!1:k>0;if("height"===a.substring(d-6,d))return l=document.documentElement.clientHeight||document.body.clientHeight,null!==c?"length"===h?e&&l>=i||g&&i>l||!e&&!g&&l===i:!1:l>0;if("device-aspect-ratio"===a.substring(d-19,d))return"aspect-ratio"===h&&screen.width*i[1]===screen.height*i[0];if("color-index"===a.substring(d-11,d)){var m=Math.pow(2,screen.colorDepth);return null!==c?"absolute"===h?e&&m>=i||g&&i>m||!e&&!g&&m===i:!1:m>0}if("color"===a.substring(d-5,d)){var n=screen.colorDepth;return null!==c?"absolute"===h?e&&n>=i||g&&i>n||!e&&!g&&n===i:!1:n>0}if("resolution"===a.substring(d-10,d)){var o;
return o=f("dpcm"===j?"1cm":"1in"),null!==c?"resolution"===h?e&&o>=i||g&&i>o||!e&&!g&&o===i:!1:o>0}return!1},h=function(a){var b=a.getValid(),c=a.getExpressions(),d=c.length;if(d>0){for(var e=0;d>e&&b;e++)b=g(c[e].mediaFeature,c[e].value);var f=a.getNot();return b&&!f||f&&!b}return b},i=function(a,b){for(var d=a.getMediaQueries(),e={},f=0;f<d.length;f++){var g=d[f].getMediaType();if(0!==d[f].getExpressions().length){var i=!0;if("all"!==g&&b&&b.length>0){i=!1;for(var j=0;j<b.length;j++)b[j]===g&&(i=!0)}i&&h(d[f])&&(e[g]=!0)}}var k=[],l=0;for(var m in e)e.hasOwnProperty(m)&&(l>0&&(k[l++]=","),k[l++]=m);k.length>0&&(c[c.length]=cssHelper.addStyle("@media "+k.join("")+"{"+a.getCssText()+"}",b,!1))},j=function(a,b){for(var c=0;c<a.length;c++)i(a[c],b)},k=function(a){for(var b=a.getAttrMediaQueries(),d=!1,e={},f=0;f<b.length;f++)h(b[f])&&(e[b[f].getMediaType()]=b[f].getExpressions().length>0);var g=[],i=[];for(var k in e)e.hasOwnProperty(k)&&(g[g.length]=k,e[k]&&(i[i.length]=k),"all"===k&&(d=!0));i.length>0&&(c[c.length]=cssHelper.addStyle(a.getCssText(),i,!1));var l=a.getMediaQueryLists();d?j(l):j(l,g)},l=function(a){for(var b=0;b<a.length;b++)k(a[b]);ua.ie?(document.documentElement.style.display="block",setTimeout(function(){document.documentElement.style.display=""},0),setTimeout(function(){cssHelper.broadcast("cssMediaQueriesTested")},100)):cssHelper.broadcast("cssMediaQueriesTested")},m=function(){for(var a=0;a<c.length;a++)cssHelper.removeStyle(c[a]);c=[],cssHelper.stylesheets(l)},n=0,o=function(){var a=cssHelper.getViewportWidth(),b=cssHelper.getViewportHeight();if(ua.ie){var c=document.createElement("div");c.style.position="absolute",c.style.top="-9999em",c.style.overflow="scroll",document.body.appendChild(c),n=c.offsetWidth-c.clientWidth,document.body.removeChild(c)}var e,f=function(){var c=cssHelper.getViewportWidth(),f=cssHelper.getViewportHeight();(Math.abs(c-a)>n||Math.abs(f-b)>n)&&(a=c,b=f,clearTimeout(e),e=setTimeout(function(){d()?cssHelper.broadcast("cssMediaQueriesTested"):m()},500))};window.onresize=function(){var a=window.onresize||function(){};return function(){a(),f()}}()},p=document.documentElement;return p.style.marginLeft="-32767px",setTimeout(function(){p.style.marginLeft=""},5e3),function(){d()?p.style.marginLeft="":(cssHelper.addListener("newStyleParsed",function(a){k(a.cssHelperParsed.stylesheet)}),cssHelper.addListener("cssMediaQueriesTested",function(){ua.ie&&(p.style.width="1px"),setTimeout(function(){p.style.width="",p.style.marginLeft=""},0),cssHelper.removeListener("cssMediaQueriesTested",arguments.callee)}),e(),m()),o()}}());try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}!function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).factory("$$animateReflow",["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||function(a){return b(a,10,!1)},d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||function(a){return b.cancel(a)};return function(a){var b=c(a);return function(){d(b)}}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==j)return c}}var g=b.noop,h=b.forEach,i=e.$$selectors,j=1,k="$$ngAnimateState",l="ng-animate",m={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$timeout","$rootScope","$document",function(a,c,d,j,n,o){function p(a){if(a){var b=[],e={};a=a.substr(1).split("."),(d.transitions||d.animations)&&a.push("");for(var f=0;f<a.length;f++){var g=a[f],h=i[g];h&&!e[g]&&(b.push(c.get(h)),e[g]=!0)}return b}}function q(a,b,c,d,e,i,j){function m(a){x(),!0===a?y():((a=c.data(k))&&(a.done=y,c.data(k,a)),o(D,"after",y))}function o(d,e,f){"after"==e?v():r();var i=e+"End";h(d,function(h,j){var k=function(){a:{var a=e+"Complete",b=d[j];for(b[a]=!0,(b[i]||g)(),b=0;b<d.length;b++)if(!d[b][a])break a;f()}};("before"!=e||"enter"!=a&&"move"!=a)&&h[e]?h[i]=C?h[e](c,b,k):h[e](c,k):k()})}function q(d){c.triggerHandler("$animate:"+d,{event:a,className:b})}function r(){n(function(){q("before")},0,!1)}function v(){n(function(){q("after")},0,!1)}function x(){x.hasBeenRun||(x.hasBeenRun=!0,i())}function y(){if(!y.hasBeenRun){y.hasBeenRun=!0;var a=c.data(k);a&&(C?t(c):(a.closeAnimationTimeout=n(function(){t(c)},0,!1),c.data(k,a))),j&&n(j,0,!1)}}var z,A,B=f(c);if(B&&(z=B.className,A=z+" "+b),B&&w(A)){A=(" "+A).replace(/\s+/g,"."),d||(d=e?e.parent():c.parent()),A=p(A);var C="addClass"==a||"removeClass"==a;if(e=c.data(k)||{},u(c,d)||0===A.length)x(),r(),v(),y();else{var D=[];C&&(e.disabled||e.running&&e.structural)||h(A,function(d){if(!d.allowCancel||d.allowCancel(c,a,b)){var e=d[a];"leave"==a?(d=e,e=null):d=d["before"+a.charAt(0).toUpperCase()+a.substr(1)],D.push({before:d,after:e})}}),0===D.length?(x(),r(),v(),j&&n(j,0,!1)):(d=" "+z+" ",e.running&&(n.cancel(e.closeAnimationTimeout),t(c),s(e.animations),A=(z=C&&!e.structural)&&e.className==b&&a!=e.event,e.beforeComplete||A?(e.done||g)(!0):z&&(d="removeClass"==e.event?d.replace(" "+e.className+" "," "):d+e.className+" ")),z=" "+b+" ","addClass"==a&&0<=d.indexOf(z)||"removeClass"==a&&-1==d.indexOf(z)?(x(),r(),v(),j&&n(j,0,!1)):(c.addClass(l),c.data(k,{running:!0,event:a,className:b,structural:!C,animations:D,done:m}),o(D,"before",m)))}}else x(),r(),v(),y()}function r(a){a=f(a),h(a.querySelectorAll("."+l),function(a){a=b.element(a);var c=a.data(k);c&&(s(c.animations),t(a))})}function s(a){h(a,function(a){a.beforeComplete||(a.beforeEnd||g)(!0),a.afterComplete||(a.afterEnd||g)(!0)})}function t(a){f(a)==f(j)?m.disabled||(m.running=!1,m.structural=!1):(a.removeClass(l),a.removeData(k))}function u(a,b){if(m.disabled)return!0;if(f(a)==f(j))return m.disabled||m.running;do{if(0===b.length)break;var c=f(b)==f(j),d=c?m:b.data(k),d=d&&(!!d.disabled||!!d.running);if(c||d)return d;if(c)break}while(b=b.parent());return!0}j.data(k,m),o.$$postDigest(function(){o.$$postDigest(function(){m.running=!1})});var v=e.classNameFilter(),w=v?function(a){return v.test(a)}:function(){return!0};return{enter:function(b,c,d,e){this.enabled(!1,b),a.enter(b,c,d),o.$$postDigest(function(){q("enter","ng-enter",b,c,d,g,e)})},leave:function(b,c){r(b),this.enabled(!1,b),o.$$postDigest(function(){q("leave","ng-leave",b,null,null,function(){a.leave(b)},c)})},move:function(b,c,d,e){r(b),this.enabled(!1,b),a.move(b,c,d),o.$$postDigest(function(){q("move","ng-move",b,c,d,g,e)})},addClass:function(b,c,d){q("addClass",c,b,null,null,function(){a.addClass(b,c)},d)},removeClass:function(b,c,d){q("removeClass",c,b,null,null,function(){a.removeClass(b,c)},d)},enabled:function(a,b){switch(arguments.length){case 2:if(a)t(b);else{var c=b.data(k)||{};c.disabled=!0,b.data(k,c)}break;case 1:m.disabled=!a;break;default:a=!m.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,i,k){function l(a,c){E&&E(),R.push(c);var d=f(a);a=b.element(d),S.push(a);var d=a.data(K),e=d.stagger,e=d.itemIndex*(Math.max(e.animationDelay,e.transitionDelay)||0);T=Math.max(T,(e+(d.maxDelay+d.maxDuration)*M)*N),d.animationCount=O,E=k(function(){h(R,function(a){a()});var a=[],b=O;h(S,function(b){a.push(b)}),i(function(){m(a,b),a=null},T,!1),R=[],S=[],E=null,P={},T=0,O++})}function m(a,b){h(a,function(a){(a=a.data(K))&&a.animationCount==b&&(a.closeAnimationFn||g)()})}function n(a,b){var c=b?P[b]:null;if(!c){var e,f,g,i,k=0,l=0,m=0,n=0;h(a,function(a){if(a.nodeType==j){a=d.getComputedStyle(a)||{},g=a[z+F],k=Math.max(o(g),k),i=a[z+G],e=a[z+H],l=Math.max(o(e),l),f=a[B+H],n=Math.max(o(f),n);var b=o(a[B+F]);b>0&&(b*=parseInt(a[B+I],10)||1),m=Math.max(b,m)}}),c={total:0,transitionPropertyStyle:i,transitionDurationStyle:g,transitionDelayStyle:e,transitionDelay:l,transitionDuration:k,animationDelayStyle:f,animationDelay:n,animationDuration:m},b&&(P[b]=c)}return c}function o(a){var c=0;return a=b.isString(a)?a.split(/\s*,\s*/):[],h(a,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function p(a){var b=a.parent(),c=b.data(J);return c||(b.data(J,++Q),c=Q),c+"-"+f(a).className}function q(a,b,c){var d=p(a),e=d+" "+b,g={},i=P[e]?++P[e].total:0;if(i>0){var j=b+"-stagger",g=d+" "+j;(d=!P[g])&&a.addClass(j),g=n(a,g),d&&a.removeClass(j)}if(c=c||function(a){return a()},a.addClass(b),c=c(function(){return n(a,e)}),j=Math.max(c.transitionDelay,c.animationDelay),d=Math.max(c.transitionDuration,c.animationDuration),0===d)return a.removeClass(b),!1;var k="";return 0<c.transitionDuration?f(a).style[z+G]="none":f(a).style[B]="none 0s",h(b.split(" "),function(a,b){k+=(b>0?" ":"")+a+"-active"}),a.data(K,{className:b,activeClassName:k,maxDuration:d,maxDelay:j,classes:b+" "+k,timings:c,stagger:g,itemIndex:i}),!0}function r(a){var b=z+G;a=f(a),a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function s(a){var b=B;a=f(a),a.style[b]&&0<a.style[b].length&&(a.style[b]="")}function t(a,b,c){function d(c){a.off(o,e),a.removeClass(l),c=a,c.removeClass(b),c.removeData(K),c=f(a);for(var d in r)c.style.removeProperty(r[d])}function e(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now(),b=parseFloat(b.elapsedTime.toFixed(L)),Math.max(a-n,0)>=m&&b>=k&&c()}var g=a.data(K),h=f(a);if(-1!=h.className.indexOf(b)&&g){var i=g.timings,j=g.stagger,k=g.maxDuration,l=g.activeClassName,m=Math.max(i.transitionDelay,i.animationDelay)*N,n=Date.now(),o=C+" "+A,p=g.itemIndex,q="",r=[];if(0<i.transitionDuration){var s=i.transitionPropertyStyle;-1==s.indexOf("all")&&(q+=D+"transition-property: "+s+";",q+=D+"transition-duration: "+i.transitionDurationStyle+";",r.push(D+"transition-property"),r.push(D+"transition-duration"))}return p>0&&(0<j.transitionDelay&&0===j.transitionDuration&&(q+=D+"transition-delay: "+u(i.transitionDelayStyle,j.transitionDelay,p)+"; ",r.push(D+"transition-delay")),0<j.animationDelay&&0===j.animationDuration&&(q+=D+"animation-delay: "+u(i.animationDelayStyle,j.animationDelay,p)+"; ",r.push(D+"animation-delay"))),0<r.length&&(i=h.getAttribute("style")||"",h.setAttribute("style",i+" "+q)),a.on(o,e),a.addClass(l),g.closeAnimationFn=function(){d(),c()},d}c()}function u(a,b,c){var d="";return h(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function v(a,b,c){return q(a,b,c)?function(c){c&&(a.removeClass(b),a.removeData(K))}:void 0}function w(a,b,c){return a.data(K)?t(a,b,c):(a.removeClass(b),a.removeData(K),void c())}function x(a,b,c){var d=v(a,b);if(d){var e=d;return l(a,function(){r(a),s(a),e=w(a,b,c)}),function(a){(e||g)(a)}}c()}function y(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),h(a,function(a,b){a&&0<a.length&&(d+=(b>0?" ":"")+a+c)}),d}var z,A,B,C,D="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(D="-webkit-",z="WebkitTransition",A="webkitTransitionEnd transitionend"):(z="transition",A="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(D="-webkit-",B="WebkitAnimation",C="webkitAnimationEnd animationend"):(B="animation",C="animationend");var E,F="Duration",G="Property",H="Delay",I="IterationCount",J="$$ngAnimateKey",K="$$ngAnimateCSS3Data",L=3,M=1.5,N=1e3,O=0,P={},Q=0,R=[],S=[],T=0;return{allowCancel:function(a,c,d){var e=(a.data(K)||{}).classes;if(!e||0<=["enter","leave","move"].indexOf(c))return!0;var g=a.parent(),i=b.element(f(a).cloneNode());return i.attr("style","position:absolute; top:-9999px; left:-9999px"),i.removeAttr("id"),i.empty(),h(e.split(" "),function(a){i.removeClass(a)}),i.addClass(y(d,"addClass"==c?"-add":"-remove")),g.append(i),a=n(i),i.remove(),0<Math.max(a.transitionDuration,a.animationDuration)},enter:function(a,b){return x(a,"ng-enter",b)},leave:function(a,b){return x(a,"ng-leave",b)},move:function(a,b){return x(a,"ng-move",b)},beforeAddClass:function(a,b,c){var d=v(a,y(b,"-add"),function(c){return a.addClass(b),c=c(),a.removeClass(b),c});return d?(l(a,function(){r(a),s(a),c()}),d):void c()},addClass:function(a,b,c){return w(a,y(b,"-add"),c)},beforeRemoveClass:function(a,b,c){var d=v(a,y(b,"-remove"),function(c){var d=a.attr("class");return a.removeClass(b),c=c(),a.attr("class",d),c});return d?(l(a,function(){r(a),s(a),c()}),d):void c()},removeClass:function(a,b,c){return w(a,y(b,"-remove"),c)}}}])}])}(window,window.angular),function(a,b){"use strict";function c(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){l&&(l.$destroy(),l=null),m&&(d.leave(m),m=null)}function k(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=e.$new(),h=a.current;m=i(g,function(a){d.enter(a,null,m||f,function(){!b.isDefined(n)||n&&!e.$eval(n)||c()}),j()}),l=h.scope=g,l.$emit("$viewContentLoaded"),l.$eval(o)}else j()}var l,m,n=g.autoscroll,o=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function d(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());f.controller&&(g.$scope=d,g=b(f.controller,g),f.controllerAs&&(d[f.controllerAs]=g),e.data("$ngControllerController",g),e.children().data("$ngControllerController",g)),h(d)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?|\*])?/g,function(a,b,c,d){return a="?"===d?d:null,d="*"===d?d:null,e.push({name:c,optional:!!a}),b=b||"",""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){if(d[a]=b.extend({reloadOnSearch:!0},e,a&&c(a,e)),a){var f="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[f]=b.extend({redirectTo:a},c(f,e))}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function(c,e,f,g,h,i,j,k){function l(){var a=m(),d=p.current;a&&d&&a.$$route===d.$$route&&b.equals(a.pathParams,d.pathParams)&&!a.reloadOnSearch&&!o?(d.params=a.params,b.copy(d.params,f),c.$broadcast("$routeUpdate",d)):(a||d)&&(o=!1,c.$broadcast("$routeChangeStart",a,d),(p.current=a)&&a.redirectTo&&(b.isString(a.redirectTo)?e.path(n(a.redirectTo,a.params)).search(a.params).replace():e.url(a.redirectTo(a.pathParams,e.path(),e.search())).replace()),g.when(a).then(function(){if(a){var c,d,e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a)}),b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),d=k.getTrustedResourceUrl(d),b.isDefined(d)&&(a.loadedTemplateUrl=d,c=i.get(d,{cache:j}).then(function(a){return a.data}))),b.isDefined(c)&&(e.$template=c),g.all(e)}}).then(function(e){a==p.current&&(a&&(a.locals=e,b.copy(a.params,f)),c.$broadcast("$routeChangeSuccess",a,d))},function(b){a==p.current&&c.$broadcast("$routeChangeError",a,d,b)}))}function m(){var c,f;return b.forEach(d,function(d){var g;if(g=!f){var h=e.path();g=d.keys;var i={};if(d.regexp)if(h=d.regexp.exec(h)){for(var j=1,k=h.length;k>j;++j){var l=g[j-1],m="string"==typeof h[j]?decodeURIComponent(h[j]):h[j];l&&m&&(i[l.name]=m)}g=i}else g=null;else g=null;g=c=g}g&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function n(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var o=!1,p={routes:d,reload:function(){o=!0,c.$evalAsync(l)}};return c.$on("$locationChangeSuccess",l),p}]}),a.provider("$routeParams",function(){this.$get=function(){return{}}}),a.directive("ngView",c),a.directive("ngView",d),c.$inject=["$route","$anchorScroll","$animate"],d.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b){"use strict";function c(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function d(a,c){function d(a,d,g,h){if(d=b.lowercase(d),v[d])for(;q.last()&&w[q.last()];)f("",q.last());u[d]&&q.last()==d&&f("",d),h=r[d]||!!h,h||q.push(d);var i={};g.replace(k,function(a,b,c,d,f){var g=c||d||f||"";i[b]=e(g)}),c.start&&c.start(d,i,h)}function f(a,d){var e,f=0;if(d=b.lowercase(d))for(f=q.length-1;f>=0&&q[f]!=d;f--);if(f>=0){for(e=q.length-1;e>=f;e--)c.end&&c.end(q[e]);q.length=f}}var g,h,p,q=[],s=a;for(q.last=function(){return q[q.length-1]};a;){if(h=!0,q.last()&&x[q.last()])a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+q.last()+"[^>]*>","i"),function(a,b){return b=b.replace(n,"$1").replace(o,"$1"),c.chars&&c.chars(e(b)),""}),f("",q.last());else if(0===a.indexOf("<!--")?(g=a.indexOf("-->"),g>=0&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),h=!1)):m.test(a)?(p=a.match(j),p&&(a=a.substring(p[0].length),p[0].replace(j,f),h=!1)):l.test(a)&&(p=a.match(i),p&&(a=a.substring(p[0].length),p[0].replace(i,d),h=!1)),h){g=a.indexOf("<");var t=0>g?a:a.substring(0,g);a=0>g?"":a.substring(g),c.chars&&c.chars(e(t))}if(a==s)throw"Parse Error: "+a;s=a}f()}function e(a){return B.innerHTML=a.replace(/</g,"&lt;"),B.innerText||B.textContent||""}function f(a){return a.replace(/&/g,"&amp;").replace(q,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,g){a=b.lowercase(a),!c&&x[a]&&(c=a),c||1!=y[a]||(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);1!=A[e]||z[e]===!0&&!a.match(p)||(d(" "),d(c),d('="'),d(f(a)),d('"'))}),d(g?"/>":">"))},end:function(a){a=b.lowercase(a),c||1!=y[a]||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(f(a))}}}var h=function(a){var b=[];return d(a,g(b)),b.join("")},i=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,j=/^<\s*\/\s*([\w:-]+)[^>]*>/,k=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,l=/^</,m=/^<\s*\//,n=/<!--(.*?)-->/g,o=/<!\[CDATA\[(.*?)]]>/g,p=/^((ftp|https?):\/\/|mailto:|#)/,q=/([^\#-~| |!])/g,r=c("area,br,col,hr,img,wbr"),s=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),t=c("rp,rt"),u=b.extend({},t,s),v=b.extend({},s,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),w=b.extend({},t,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),x=c("script,style"),y=b.extend({},r,v,w,u),z=c("background,cite,href,longdesc,src,usemap"),A=b.extend({},z,c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),B=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",h),b.module("ngSanitize").directive("ngBindHtml",["$sanitize",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtml),b.$watch(d.ngBindHtml,function(b){b=a(b),c.html(b||"")})}}]),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,b=/^mailto:/;return function(c){if(!c)return c;for(var d,e,f,h=c,i=[],j=g(i);d=h.match(a);)e=d[0],d[2]==d[3]&&(e="mailto:"+e),f=d.index,j.chars(h.substr(0,f)),j.start("a",{href:e}),j.chars(d[0].replace(b,"")),j.end("a"),h=h.substring(f+d[0].length);return j.chars(h),i.join("")}})}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/popover/popover-template.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$parent.$watch(f,function(a){b.isOpen=!!a})),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){b.hasClass(e.activeClass)||a.$apply(function(){f.$setViewValue(a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.select=function(a){i.select(a)},a.isActive=function(a){return i.currentSlide===a},a.slides=function(){return j},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);
c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=n.$modelValue?new Date(n.$modelValue):new Date(0,0,0,0,0,0,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",link:function(h,i,j,k){function l(a){u?u(h,!!a):q.isOpen=!!a}function m(a){if(a){if(angular.isDate(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}function n(a,c,d){a&&(h.$watch(b(a),function(a){q[c]=a}),y.attr(d||c,c))}function o(){q.position=s?d.offset(i):d.position(i),q.position.top=q.position.top+i.prop("offsetHeight")}var p,q=h.$new(),r=angular.isDefined(j.closeOnDateSelection)?h.$eval(j.closeOnDateSelection):f.closeOnDateSelection,s=angular.isDefined(j.datepickerAppendToBody)?h.$eval(j.datepickerAppendToBody):f.appendToBody;j.$observe("datepickerPopup",function(a){p=a||f.dateFormat,k.$render()}),q.showButtonBar=angular.isDefined(j.showButtonBar)?h.$eval(j.showButtonBar):f.showButtonBar,h.$on("$destroy",function(){C.remove(),q.$destroy()}),j.$observe("currentText",function(a){q.currentText=angular.isDefined(a)?a:f.currentText}),j.$observe("toggleWeeksText",function(a){q.toggleWeeksText=angular.isDefined(a)?a:f.toggleWeeksText}),j.$observe("clearText",function(a){q.clearText=angular.isDefined(a)?a:f.clearText}),j.$observe("closeText",function(a){q.closeText=angular.isDefined(a)?a:f.closeText});var t,u;j.isOpen&&(t=b(j.isOpen),u=t.assign,h.$watch(t,function(a){q.isOpen=!!a})),q.isOpen=t?t(h):!1;var v=function(a){q.isOpen&&a.target!==i[0]&&q.$apply(function(){l(!1)})},w=function(){q.$apply(function(){l(!0)})},x=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");x.attr({"ng-model":"date","ng-change":"dateSelection()"});var y=angular.element(x.children()[0]),z={};j.datepickerOptions&&(z=h.$eval(j.datepickerOptions),y.attr(angular.extend({},z))),k.$parsers.unshift(m),q.dateSelection=function(a){angular.isDefined(a)&&(q.date=a),k.$setViewValue(q.date),k.$render(),r&&l(!1)},i.bind("input change keyup",function(){q.$apply(function(){q.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,p):"";i.val(a),q.date=k.$modelValue},n(j.min,"min"),n(j.max,"max"),j.showWeeks?n(j.showWeeks,"showWeeks","show-weeks"):(q.showWeeks="show-weeks"in z?z["show-weeks"]:g.showWeeks,y.attr("show-weeks","showWeeks")),j.dateDisabled&&y.attr("date-disabled",j.dateDisabled);var A=!1,B=!1;q.$watch("isOpen",function(a){a?(o(),c.bind("click",v),B&&i.unbind("focus",w),i[0].focus(),A=!0):(A&&c.unbind("click",v),i.bind("focus",w),B=!0),u&&u(h,a)}),q.today=function(){q.dateSelection(new Date)},q.clear=function(){q.dateSelection(null)};var C=a(x)(q);s?c.find("body").append(C):i.after(C)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||e.hasClass("disabled")||e.prop("disabled")||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(c,d,e){c.windowClass=e.windowClass||"",b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,i),b.toggleClass(m,n.length()>0)}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&e.$apply(function(){o.dismiss(b.key)}))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr("window-class",b.windowClass),i.attr("index",n.length()-1),i.attr("animate","animate"),i.html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this,f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,this.page>0&&this.page<=a.totalPages&&(a.pages=this.getPages(this.page,a.totalPages))},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("page",function(){e.render()}),a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),e.page>b?a.selectPage(b):e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"compile-scope="$parent"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!z||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return b.tt_content?(r(),u&&g.cancel(u),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),A(),b.tt_isOpen=!0,b.$digest(),A):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),b.tt_animation?u=g(s,500):s()}function r(){t||(t=a(b,function(){}),b.$digest())}function s(a){t&&(a?(t.remove(),t=null):angular.forEach(t,function(a){a.parentNode&&a.parentNode.removeChild(a)}))}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1,z=angular.isDefined(d[l+"Enable"]),A=function(){var a,d,e,f;switch(a=w?j.offset(c):j.position(c),d=t.prop("offsetWidth"),e=t.prop("offsetHeight"),b.tt_placement){case"right":f={top:a.top+a.height/2-e/2,left:a.left+a.width};break;case"bottom":f={top:a.top+a.height,left:a.left+a.width/2-d/2};break;case"left":f={top:a.top+a.height/2-e/2,left:a.left-d};break;default:f={top:a.top-e,left:a.left+a.width/2-d/2}}f.top+="px",f.left+="px",t.css(f)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var B=function(){y&&(c.unbind(x.show,k),c.unbind(x.hide,m))};d.$observe(l+"Trigger",function(a){B(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m)),y=!0});var C=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(C)?!!C:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),B(),s(!0)})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]).directive("popoverTemplatePopup",["$http","$templateCache","$compile","$timeout",function(a,b,c,d){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&",compileScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(e,f){e.$watch("content",function(g){g&&a.get(g,{cache:b}).then(function(a){var b=angular.element(f[0].querySelector(".popover-content"));b.children().remove(),b.append(c(a.data.trim())(e.compileScope())),d(function(){e.compileScope().$digest()})})})}}}]).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function(a,b,c,d){var e=this,f=[],g=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,h=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.addBar=function(a,b){var c=0,d=a.$parent.$index;angular.isDefined(d)&&f[d]&&(c=f[d].value),f.push(a),this.update(b,a.value,c),a.$watch("value",function(a,c){a!==c&&e.update(b,a,c)}),a.$on("$destroy",function(){e.removeBar(a)})},this.update=function(a,b,c){var e=this.getPercentage(b);h?(a.css("width",this.getPercentage(c)+"%"),d(a,{width:e+"%"})):a.css({transition:"none",width:e+"%"})},this.removeBar=function(a){f.splice(f.indexOf(a),1)},this.getPercentage=function(a){return Math.round(100*a/g)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createRateObjects=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=0,d=a.length;d>c;c++)a[c]=angular.extend({index:c},b,a[c]);return a},a.range=this.createRateObjects(angular.isDefined(b.ratingStates)?angular.copy(a.$parent.$eval(b.ratingStates)):new Array(this.maxRange)),a.rate=function(b){a.value===b||a.readonly||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1,a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a,c){a!==c&&(b.active=!!a)}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function(a,b,c,d){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,f,g,h){function i(){var a=parseInt(e.hours,10),b=e.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(e.showMeridian&&(12===a&&(a=0),e.meridian===q[1]&&(a+=12)),a):void 0}function j(){var a=parseInt(e.minutes,10);return a>=0&&60>a?a:void 0}function k(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function l(a){m(),h.$setViewValue(new Date(p)),n(a)}function m(){h.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function n(a){var b=p.getHours(),c=p.getMinutes();e.showMeridian&&(b=0===b||12===b?12:b%12),e.hours="h"===a?b:k(b),e.minutes="m"===a?c:k(c),e.meridian=p.getHours()<12?q[0]:q[1]}function o(a){var b=new Date(p.getTime()+6e4*a);p.setHours(b.getHours(),b.getMinutes()),l()}if(h){var p=new Date,q=angular.isDefined(g.meridians)?e.$parent.$eval(g.meridians):c.meridians||d.DATETIME_FORMATS.AMPMS,r=c.hourStep;g.hourStep&&e.$parent.$watch(a(g.hourStep),function(a){r=parseInt(a,10)});var s=c.minuteStep;g.minuteStep&&e.$parent.$watch(a(g.minuteStep),function(a){s=parseInt(a,10)}),e.showMeridian=c.showMeridian,g.showMeridian&&e.$parent.$watch(a(g.showMeridian),function(a){if(e.showMeridian=!!a,h.$error.time){var b=i(),c=j();angular.isDefined(b)&&angular.isDefined(c)&&(p.setHours(b),l())}else n()});var t=f.find("input"),u=t.eq(0),v=t.eq(1),w=angular.isDefined(g.mousewheel)?e.$eval(g.mousewheel):c.mousewheel;if(w){var x=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};u.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementHours():e.decrementHours()),a.preventDefault()}),v.bind("mousewheel wheel",function(a){e.$apply(x(a)?e.incrementMinutes():e.decrementMinutes()),a.preventDefault()})}if(e.readonlyInput=angular.isDefined(g.readonlyInput)?e.$eval(g.readonlyInput):c.readonlyInput,e.readonlyInput)e.updateHours=angular.noop,e.updateMinutes=angular.noop;else{var y=function(a,b){h.$setViewValue(null),h.$setValidity("time",!1),angular.isDefined(a)&&(e.invalidHours=a),angular.isDefined(b)&&(e.invalidMinutes=b)};e.updateHours=function(){var a=i();angular.isDefined(a)?(p.setHours(a),l("h")):y(!0)},u.bind("blur",function(){!e.validHours&&e.hours<10&&e.$apply(function(){e.hours=k(e.hours)})}),e.updateMinutes=function(){var a=j();angular.isDefined(a)?(p.setMinutes(a),l("m")):y(void 0,!0)},v.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=k(e.minutes)})})}h.$render=function(){var a=h.$modelValue?new Date(h.$modelValue):null;isNaN(a)?(h.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(p=a),m(),n())},e.incrementHours=function(){o(60*r)},e.decrementHours=function(){o(60*-r)},e.incrementMinutes=function(){o(s)},e.decrementMinutes=function(){o(-s)},e.toggleMeridian=function(){o(720*(p.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?b(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=angular.element("<div typeahead-popup></div>");w.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&w.attr("template-url",k.typeaheadTemplateUrl);var x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y=function(){x.matches=[],x.activeIdx=-1},z=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){if(a===l.$viewValue&&m){if(c.length>0){x.activeIdx=0,x.matches.length=0;for(var d=0;d<c.length;d++)b[v.itemName]=c[d],x.matches.push({label:v.viewMapper(x,b),model:c[d]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight")}else y();q(i,!1)}},function(){y(),q(i,!1)})};y(),x.query=void 0;var A;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(A&&d.cancel(A),A=d(function(){z(a)},o)):z(a):(q(i,!1),y()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,d={};d[v.itemName]=c=x.matches[a].model,b=v.modelMapper(i,d),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,d)}),y(),j[0].focus()},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),y(),x.$digest()))}),j.bind("blur",function(){m=!1});var B=function(a){j[0]!==a.target&&(y(),x.$digest())};e.bind("click",B),i.$on("$destroy",function(){e.unbind("click",B)});var C=a(w)(x);t?e.find("body").append(C):j.after(C)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n   <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")
}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n  <li ng-transclude></li>\n"+'    <li ng-show="showButtonBar" style="padding:10px 9px 2px">\n      <span class="btn-group">\n           <button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n          <button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n            <button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n      </span>\n        <button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n   </li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n    <tbody>\n        <tr class="text-center">\n           <td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n          <td>&nbsp;</td>\n            <td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n            <td ng-show="showMeridian"></td>\n       </tr>\n      <tr>\n           <td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n               <input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n         </td>\n          <td>:</td>\n         <td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n             <input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n          </td>\n          <td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n        </tr>\n      <tr class="text-center">\n           <td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n            <td>&nbsp;</td>\n            <td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n          <td ng-show="showMeridian"></td>\n       </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]),angular.module("ngDragDrop",[]).directive("uiDraggable",["$parse","$rootScope",function(a,b){return function(c,d,e){window.jQuery&&!window.jQuery.event.props.dataTransfer&&window.jQuery.event.props.push("dataTransfer"),d.attr("draggable",!1),e.$observe("uiDraggable",function(a){d.attr("draggable",a)});var f="";c.$watch(e.drag,function(a){f=a}),d.bind("dragstart",function(a){var c=angular.toJson(f),d=e.dragChannel||"defaultchannel";a.dataTransfer.setData("Text",c),b.$broadcast("ANGULAR_DRAG_START",d)}),d.bind("selectstart",function(){return this.dragDrop(),!1},!1),d.bind("dragend",function(d){var f=e.dragChannel||"defaultchannel";if(b.$broadcast("ANGULAR_DRAG_END",f),"none"!==d.dataTransfer.dropEffect&&e.onDropSuccess){var g=a(e.onDropSuccess);c.$apply(function(){g(c,{$event:d})})}})}}]).directive("uiOnDrop",["$parse","$rootScope",function(a,b){return function(c,d,e){function f(a){return a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.dataTransfer.dropEffect="move",!1}function g(b){b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation();var f=b.dataTransfer.getData("Text");f=angular.fromJson(f);var g=a(e.uiOnDrop);c.$apply(function(){g(c,{$data:f,$event:b})}),d.removeClass(j)}var h="defaultchannel",i="",j=e.dragEnterClass||"on-drag-enter";b.$on("ANGULAR_DRAG_START",function(a,b){i=b,h===b&&(d.bind("dragover",f),d.bind("drop",g),d.addClass(j))}),b.$on("ANGULAR_DRAG_END",function(a,b){i="",h===b&&(d.unbind("dragover",f),d.unbind("drop",g),d.removeClass(j))}),e.$observe("dropChannel",function(a){a&&(h=a)})}}]),function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("$script",this,function(){function a(a,b){for(var c=0,d=a.length;d>c;++c)if(!b(a[c]))return m;return 1}function b(b,c){a(b,function(a){return!c(a)})}function c(f,g,m){function o(a){return a.call?a():i[a]}function p(){if(!--t){i[s]=1,r&&r();for(var c in k)a(c.split("|"),o)&&!b(k[c],o)&&(k[c]=[])}}f=f[n]?f:[f];var q=g&&g.call,r=q?g:m,s=q?f.join(""):g,t=f.length;return setTimeout(function(){b(f,function(a){return null===a?p():l[a]?(s&&(j[s]=1),2==l[a]&&p()):(l[a]=1,s&&(j[s]=1),void d(!h.test(a)&&e?e+a+".js":a,p))})},0),c}function d(a,b){var c=f.createElement("script"),d=m;c.onload=c.onerror=c[r]=function(){c[p]&&!/^c|loade/.test(c[p])||d||(c.onload=c[r]=null,d=1,l[a]=2,b())},c.async=1,c.src=a,g.insertBefore(c,g.lastChild)}var e,f=document,g=f.getElementsByTagName("head")[0],h=/^https?:\/\//,i={},j={},k={},l={},m=!1,n="push",o="DOMContentLoaded",p="readyState",q="addEventListener",r="onreadystatechange";return!f[p]&&f[q]&&(f[q](o,function s(){f.removeEventListener(o,s,m),f[p]="complete"},m),f[p]="loading"),c.get=d,c.order=function(a,b,d){!function e(f){f=a.shift(),a.length?c(f,e):c(f,b,d)}()},c.path=function(a){e=a},c.ready=function(d,e,f){d=d[n]?d:[d];var g=[];return!b(d,function(a){i[a]||g[n](a)})&&a(d,function(a){return i[a]})?e():!function(a){k[a]=k[a]||[],k[a][n](e),f&&f(g)}(d.join("|")),c},c.done=function(a){c([null],a)},c});