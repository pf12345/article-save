function getHostNameFromUrl(a){var b=a.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return b&&b[1]}function showMessage(a,b,c){if(a){var d=b||3;jQuery("#inote-message").html(a).show();var e=setTimeout(function(){"function"==typeof c&&c(),jQuery("#inote-message").hide().html(""),clearTimeout(e)},700*d)}}function chromePageClose(){var a=/chrome\-extension\:\/\/|undefined|chrome\:\/\/|chrome\.google/i;localStorage.localsite.match(a)?chrome.tabs.update(null,{url:localStorage.localsite}):responseToParent("closeIframe")}function responseToParent(a){window.parent.postMessage(JSON.stringify(a),"*")}function myMagazines(a){return myStorage("myMagazine",a)}function myCurrentMagazines(a){return myStorage("myCurrentMagazine",a)}function subMagazines(a){var b="subMagazines";return myStorage(b,a)}function singleMagazine(a,b,c){var d="single_magazine_"+a+"_"+b;return myStorage(d,c)}function readPlan(a){var b="readplan";if(a){var c={today:a.today.slice(0,9),tomorrow:a.tomorrow.slice(0,6),future:a.future.slice(0,6)};return myStorage(b,c),a}return myStorage(b)}function messageInfo(a){var b="messageInfo";return a?(myStorage(b,a),a):myStorage(b)}function displayType(a){var b="articleDisplayType";return myStorage(b,a)}function themeStyle(a){var b="theme_style";return myStorage(b,a)}function articleDraft(a){var b="article_draft";return myStorage(b,a)}function myStorage(a,b){return a=getCurrentUserID()+"_"+a,void 0===b?localStorage[a]?JSON.parse(localStorage[a]):void 0:(localStorage[a]=JSON.stringify(b),b)}function getCurrentUserID(){if(localStorage.userData){var a=JSON.parse(localStorage.userData);return a.ID}return 1}function shareToSns(a,b,c){var d=(c.title+"："+c.content).replace(/<(?:.|\n)*?>/gm,"").substring(0,100)+"...",e="http://www.inoteweb.com/article/share/"+c.ID.replace("0-",""),f=c.imgURL;switch(b){case"weibo":d+="(分享自 @iNote微收藏)",url="http://service.weibo.com/share/share.php?url="+encodeURIComponent(e)+"&title="+encodeURIComponent(d)+"&appkey=4029991350&relateUid=3310679382&count=1&pic="+f;break;case"qzone":url="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(e)+"&title="+encodeURIComponent(d)+'&site="iRead"';break;case"renren":url="http://share.renren.com/share/buttonshare.do?link="+encodeURIComponent(e)+"&title="+encodeURIComponent(d);break;case"tengxunweibo":url="http://share.v.t.qq.com/index.php?c=share&a=index&url="+encodeURIComponent(e)+"&appkey=100453998&assname=&title="+encodeURIComponent(d)+"&pic="+f;break;default:return}a.open(url)}function reconvert(a){return a=a.replace(/(\\u)(\w{4})/gi,function(a){return String.fromCharCode(parseInt(escape(a).replace(/(%5Cu)(\w{4})/g,"$2"),16))}),a=a.replace(/(&#x)(\w{4});/gi,function(a){return String.fromCharCode(parseInt(escape(a).replace(/(%26%23x)(\w{4})(%3B)/g,"$2"),16))})}function pushArr(a,b,c,d){for(var e=a;b>e;e++)c.push(d[e])}function showShareTip(a,b){b?$(b).css("display")&&"block"==$(b).css("display")?$(b).hide():($(".popover").hide(),$(b).show()):$(".popover"+a).css("display")&&"block"==$(".popover"+a).css("display")?$(".popover"+a).hide():($(".popover").hide(),$(".popover"+a).show()),$(document).click(function(a){a.target.className.match(/share|move|readplan/)||($(".share-popover").hide(),$(".move-popover").hide(),$(".readplan-popover").hide())}),$(window).scroll(function(){$(".share-popover").hide(),$(".move-popover").hide(),$(".readplan-popover").hide()})}function copy(a,b,c,d){for(var e,f=0,g=a;g>f;f++)"text"==c?e=$(b+f).text():"value"==c&&(e=$(b+f).val()),d?$(d+f).zclip({path:"./js/ZeroClipboard.swf",copy:e}):$("#copy-button"+f).zclip({path:"./js/ZeroClipboard.swf",copy:e})}function getIframeInfo(a){function b(b){try{var c=JSON.parse(b.data)}catch(d){var c={}}0===c.code?(localStorage.token=c.value.token,localStorage.userData=JSON.stringify(c.value.user),a(c)):showMessage(c.message)}window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b,!1)}function headerHover(a){$(".nav-li").attr("class","nav-li"),a&&$(a).attr("class","current-Nav nav-li")}function smallHeaderHover(a){$(".small-nav-li").attr("class","small-nav-li"),a&&$(a).attr("class","current-small-nav small-nav-li")}function removePopover(){$(".popover").hide()}function smallHeaderMoveToRight(){var a=$(".main"),b=$(".main-div"),c=$(".small-header-list"),d=$(".small-header-list-div"),e=$("body");a.attr("style","overflow:hidden;"),d.show(),b.css("position","absolute"),b.animate({left:"80%"},200,function(){b.css({height:c.height()+"px",overflow:"hidden",width:"20%",position:"absolute"}),e.css({overflow:"hidden"})})}function smallHeaderMoveToLeft(){var a=$(".main"),b=$(".main-div"),c=$(".small-header-list-div"),d=$("body");a.attr("style",""),b.css("width","100%"),b.animate({left:"0"},200,function(){b.attr("style",""),d.attr("style",""),c.hide()})}var addReadPlan=function(a,b,c,d){b||(b=""),d.get("api/Article/SetReadPlan",{ID:a,plan:c,comment:b},function(a){0==a.code&&removePopover(),showMessage(a.message)})},Base64=function(){function a(a){if(/([^\u0000-\u00ff])/.test(a))throw new Error("INVALID_CHARACTER_ERR");for(var b,d,e,f=0,g=[];f<a.length;){switch(d=a.charCodeAt(f),e=f%3){case 0:g.push(c.charAt(d>>2));break;case 1:g.push(c.charAt((3&b)<<4|d>>4));break;case 2:g.push(c.charAt((15&b)<<2|d>>6)),g.push(c.charAt(63&d))}b=d,f++}return 0==e?(g.push(c.charAt((3&b)<<4)),g.push("==")):1==e&&(g.push(c.charAt((15&b)<<2)),g.push("=")),g.join("")}function b(a){a=a.replace(/\s|=/g,"");for(var b,d,e,f=0,g=[];f<a.length;){switch(b=c.indexOf(a.charAt(f)),e=f%4){case 0:break;case 1:g.push(String.fromCharCode(d<<2|b>>4));break;case 2:g.push(String.fromCharCode((15&d)<<4|b>>2));break;case 3:g.push(String.fromCharCode((3&d)<<6|b))}d=b,f++}return g.join("")}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{btoa:a,atob:b,encode:a,decode:b}}();window.Base64||(window.Base64=Base64),window.btoa||(window.btoa=Base64.btoa),window.atob||(window.atob=Base64.atob);